import{am as z,r as e,an as Y,bt as $,bl as G,ap as M,ao as w,bj as W,bA as Q,a as X,u as ee,p as te,dy as U,b as ae,c as ne,dA as re,dB as le,j as r,F as se,B as D,n as V,A as oe,d as ie,dC as ue}from"./index-25a41ef1.js";import{I as ce}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";function g(l){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g(l)}function de(l,a){if(g(l)!=="object"||l===null)return l;var o=l[Symbol.toPrimitive];if(o!==void 0){var t=o.call(l,a||"default");if(g(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(l)}function me(l){var a=de(l,"string");return g(a)==="symbol"?a:String(a)}function pe(l,a,o){return a=me(a),a in l?Object.defineProperty(l,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[a]=o,l}var H=z.extend({defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0}});function J(l,a){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);a&&(t=t.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),o.push.apply(o,t)}return o}function K(l){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?J(Object(o),!0).forEach(function(t){pe(l,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(o,t))})}return l}var fe=function(){try{return Quill}catch{return null}}(),Z=e.memo(e.forwardRef(function(l,a){var o=e.useContext(Y),t=H.getProps(l,o),v=H.setMetaData({props:t}),E=v.ptm,S=e.useRef(null),f=e.useRef(null),N=e.useRef(null),i=e.useRef(null),q=e.useRef(!1);$(function(){if(!q.current){var p={modules:K({toolbar:t.showHeader?N.current:!1},t.modules),placeholder:t.placeholder,readOnly:t.readOnly,theme:t.theme,formats:t.formats};fe?(i.current=new Quill(f.current,p),L(),i.current&&i.current.getModule("toolbar")&&t.onLoad&&t.onLoad(i.current)):W(()=>import("./quill-e3a4db89.js").then(c=>c.q),["assets/quill-e3a4db89.js","assets/index-25a41ef1.js","assets/index-d8cb83a3.css"]).then(function(c){c&&Q.isExist(f.current)&&(c.default?i.current=new c.default(f.current,p):i.current=new c(f.current,p),L())}).then(function(){i.current&&i.current.getModule("toolbar")&&t.onLoad&&t.onLoad(i.current)}),q.current=!0}});var L=function(){t.value&&i.current.setContents(i.current.clipboard.convert(t.value)),i.current.on("text-change",function(c,n,s){var d=f.current.children[0],b=d?d.innerHTML:null,C=i.current.getText();if(b==="<p><br></p>"&&(b=null),s==="api"){var T=f.current.children[0],u=document.createElement("div");if(u.innerHTML=t.value||"",Q.isEqualElement(T,u))return}if(t.maxLength){var I=i.current.getLength();I>t.maxLength&&i.current.deleteText(t.maxLength,I)}t.onTextChange&&t.onTextChange({htmlValue:b,textValue:C,delta:c,source:s})}),i.current.on("selection-change",function(c,n,s){t.onSelectionChange&&t.onSelectionChange({range:c,oldRange:n,source:s})})};G(function(){i.current&&!i.current.hasFocus()&&(t.value?i.current.setContents(i.current.clipboard.convert(t.value)):i.current.setText(""))},[t.value]),e.useImperativeHandle(a,function(){return{props:t,getQuill:function(){return i.current},getElement:function(){return S.current},getContent:function(){return f.current},getToolbar:function(){return N.current}}});var k=function(){var c=w({ref:N,className:"p-editor-toolbar"},E("toolbar"));if(t.showHeader===!1)return null;if(t.headerTemplate)return e.createElement("div",c,t.headerTemplate);var n=function(b,C){return w(b&&K({},b),E(C))},s=w({className:"ql-formats"},E("formats"));return e.createElement("div",c,e.createElement("span",s,e.createElement("select",n({className:"ql-header",defaultValue:"0"},"select"),e.createElement("option",n({value:"1"},"option"),"Heading"),e.createElement("option",n({value:"2"},"option"),"Subheading"),e.createElement("option",n({value:"0"},"option"),"Normal")),e.createElement("select",n({className:"ql-font"},"select"),e.createElement("option",n(void 0,"option")),e.createElement("option",n({value:"serif"},"option")),e.createElement("option",n({value:"monospace"},"option")))),e.createElement("span",s,e.createElement("button",n({type:"button",className:"ql-bold","aria-label":"Bold"},"button")),e.createElement("button",n({type:"button",className:"ql-italic","aria-label":"Italic"},"button")),e.createElement("button",n({type:"button",className:"ql-underline","aria-label":"Underline"},"button"))),e.createElement("span",s,e.createElement("select",n({className:"ql-color"},"select")),e.createElement("select",n({className:"ql-background"},"select"))),e.createElement("span",s,e.createElement("button",n({type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"},"button")),e.createElement("button",n({type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"},"button")),e.createElement("select",n({className:"ql-align"},"select"),e.createElement("option",n({defaultValue:!0},"option")),e.createElement("option",n({value:"center"},"option")),e.createElement("option",n({value:"right"},"option")),e.createElement("option",n({value:"justify"},"option")))),e.createElement("span",s,e.createElement("button",n({type:"button",className:"ql-link","aria-label":"Insert Link"},"button")),e.createElement("button",n({type:"button",className:"ql-image","aria-label":"Insert Image"},"button")),e.createElement("button",n({type:"button",className:"ql-code-block","aria-label":"Insert Code Block"},"button"))),e.createElement("span",s,e.createElement("button",n({type:"button",className:"ql-clean","aria-label":"Remove Styles"},"button"))))},R=M("p-component p-editor-container",t.className),F=k(),P=w({ref:f,className:"p-editor-content",style:t.style},E("content")),B=e.createElement("div",P),_=w({id:t.id,ref:S,className:R},H.getOtherProps(t),E("root"));return e.createElement("div",_,F,B)}));Z.displayName="Editor";const ve=()=>{const l=X(),a=ee(),o=e.useRef(null);e.useState([]);const[t,v]=e.useState([]);e.useState([]);const[E,S]=e.useState(!1),[f,N]=e.useState("");e.useEffect(()=>{te()}),e.useEffect(()=>{if(s!=null){if(n==!1){const u={InstructionsId:s.InstructionsId,Taskname:"CREATEINITIALIZE"};a(U(u))}}else a(U({Taskname:"CREATEINITIALIZE",InstructionsId:0}))},[]);const{allCompanies:i,createOrEdit:q,loading:L,error:k,CompanyList:R,StatusList:F,CountryList:P,PlantList:B,VisitorTypeList:_,InstructionsList:p,isView:c,isCreate:n,HdrTable:s}=ae(u=>u.instructions),d=ne({initialValues:{InstructionsId:s!=null?s.InstructionsId:0,CompanyId:s!=null?s.CompanyId:"",PlantId:s!=null?s.PlantId:"",Status:s!=null?s.Status:1,VisitorTypeId:s!=null?s.VisitorTypeId:35,TextInput:s!=null?s.TextInput:""},validationSchema:ce,onSubmit:(u,{resetForm:I})=>{var A,O;let x={Instruction:{InstructionsId:u.InstructionsId,CompanyId:u.CompanyId,PlantId:u.PlantId,Status:u.Status,VisitorTypeId:u.VisitorTypeId||35,TextInput:u.TextInput}};if(s!=null){if(s.isCreate!=!1)try{a(re(x)).then(m=>{var h,j;(m.payload!=null||!m.payload)&&(m.payload.transtatus.result==!0?((h=o.current)==null||h.show({severity:"success",summary:"Success Message",detail:m.payload.transtatus.lstErrorItem[0].Message}),I(),setTimeout(()=>{l.push("/home/vInstructions")},800)):m.payload.transtatus.result==!1&&((j=o.current)==null||j.show({severity:"error",summary:"Error Message",detail:m.payload.transtatus.lstErrorItem[0].Message})))})}catch(y){(A=o.current)==null||A.show({severity:"warn",summary:"Error Message",detail:y})}}else try{a(le(x)).then(m=>{var h,j;S(!0),(m.payload!=null||!m.payload)&&(m.payload.transtatus.result==!0?(S(!1),(h=o.current)==null||h.show({severity:"success",summary:"Success Message",detail:m.payload.transtatus.lstErrorItem[0].Message}),I()):m.payload.transtatus.result==!1&&(S(!1),(j=o.current)==null||j.show({severity:"warn",summary:"Error Message",detail:m.payload.transtatus.lstErrorItem[0].Message})))}).catch(m=>{var h;(h=o.current)==null||h.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(m.payload)})})}catch(y){(O=o.current)==null||O.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(y.payload)})}}}),b=()=>{d.resetForm(),v([]),d.setFieldValue("TextInput",null)},C=(u,I,x)=>{d.setFieldValue("PlantId",null),d.setFieldValue(u,x);var O=a(ue({Type:"OnChangeCompany",CompanyId:x}));O.then(y=>{v(y.payload.PlantList)}).catch(y=>{var m;(m=o.current)==null||m.show({severity:"error",detail:"Error",summary:y})}),v([])},T=(u,I,x)=>{d.setFieldValue(u,x)};return r.jsxs(r.Fragment,{children:[r.jsx(se,{initialValues:d.initialValues,validationSchema:d.validationSchema,onSubmit:d.handleSubmit,children:r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"inner-page-container",children:[r.jsx("div",{className:"page-title",children:r.jsxs("div",{className:"grid grid-nogutter",children:[r.jsx("div",{className:"md:col-6",children:r.jsx("h1",{children:"Instructions"})}),r.jsx("div",{className:"md:col-6 text-right",children:r.jsxs("div",{className:"action-btn",children:[r.jsxs(r.Fragment,{children:[r.jsx(D,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",disabled:!!(c||E),type:"submit",onClick:()=>d.handleSubmit()}),r.jsx(D,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",disabled:!!(c||n==!1),className:"text-center",onClick:()=>b()})]}),r.jsx(D,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{l.push("/home/vInstructions")}})]})})]})}),r.jsx("div",{className:"form-container scroll-y",children:r.jsx("form",{children:r.jsx("div",{className:"white",children:r.jsx("div",{className:"widget-body",children:r.jsx("div",{className:"normal-table",children:r.jsx("div",{className:"grid",children:L?r.jsx(oe,{}):r.jsxs(r.Fragment,{children:[r.jsx(V,{type:"select",name:"CompanyId",label:"Company",options:R,show:!0,required:!0,disable:!!c,optionLabel:"CompanyName",optionValue:"CompanyId",handleSelect:C,formik:d,fldStyle:"col-12 md:col-3",showFilter:!0}),r.jsx(V,{type:"select",name:"PlantId",label:"Plant",options:t,show:!0,required:!0,disable:!!c,optionLabel:"PlantName",optionValue:"PlantId",handleSelect:T,formik:d,fldStyle:"col-12 md:col-3",showFilter:!0}),r.jsx(V,{type:"select",name:"VisitorTypeId",label:"Visitor Type ",options:_,show:!0,required:!1,disable:!!c,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:T,fldStyle:"col-12 md:col-3",formik:d}),r.jsx(V,{type:"select",name:"Status",label:"Status",options:F,show:!0,required:!0,disable:!!c||n==null||n==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:T,formik:d,fldStyle:"col-12 md:col-3"}),r.jsx("div",{className:"card",style:{textAlign:"center"},children:r.jsx(Z,{name:"TextInput",value:d.values.TextInput,onTextChange:u=>{d.setFieldValue("TextInput",u.htmlValue),N(u.htmlValue)},style:{height:"320px",textAlign:"center"}})})]})})})})})})})]})})}),r.jsx(ie,{toast:o})]})};export{ve as default};
