import{r as i,a as C,u as S,b as v,p as b,Z as N,_ as u,j as s,C as E,d as I,$ as h,g as j,a0 as A}from"./index-25a41ef1.js";import{P as M,A as w}from"./PageHeader-b76b68bd.js";import{e as p}from"./ExportService-4b3a6c99.js";import"./column.esm-11a46c7b.js";import"./index.esm-9a713e1a.js";import"./inputswitch.esm-a89edc74.js";import"./jspdf.es.min-40ee8370.js";const D=()=>{i.useState(null);const f=C(),d=i.useRef(null),o=S(),{RoleList:g,loading:y}=v(t=>t.role);i.useEffect(()=>{b()}),i.useEffect(()=>{c()},[]);const c=()=>o(N({RoleId:0,Taskname:"SearchInitialize"})),[m,O]=i.useState({pageTitle:"Role",pageHeader:{pageActions:[{create:!0,clear:!1,save:!1,createQuery:"/home/cRole",createDispatch:()=>o(u({data:null,isView:!1,isCreate:!0}))}]},tableCheckSelection:!1,tableAction:!0,tableActionStyle:{width:"120px",textAlign:"center"},tableRows:10,tableRowsOptions:[5,10,25],tablePagination:!0,tableActions:[{title:"View",name:"view"},{title:"Edit",name:"edit"},{title:"Delete",name:"delete"}],tableColumns:[{title:"Role Code",name:"RoleCode",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Role Name",name:"RoleName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem"}},{title:"Created By",name:"CreatedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Created On",name:"CreatedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Modified By",name:"ModifiedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Modified On",name:"ModifiedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Status",name:"StatusName",sort:!0,avatar:!1,badge:!0,colStyle:{minWidth:"2rem",textAlign:"center"}}],tableExport:t=>{c().then(l=>{R(l.payload.RoleList).then(e=>{t==="pdf"?p.Export("Role",e,"pdf"):t==="excel"&&p.Export("Role",e,"excel")}).catch(e=>{console.error(e.message)})})}}),R=t=>new Promise((r,l)=>{let e=[];t.length>0?(t.forEach(a=>{let n={"Role Code":a.RoleCode,"Role Name":a.RoleName,"Created By":a.CreatedByName,"Created On":a.CreatedOn,"Modified By":a.ModifiedByName,"Modified On":a.ModifiedOn,Status:a.StatusName};e.push(n)}),r(e)):l(new Error("No data available for export."))}),x={view:t=>{const r={RoleId:t.data.RoleId,Taskname:"CreateInitialize"};o(h(r)).then(e=>{e.payload.transtatus.result==!0&&f.push("/home/cRole")}).catch(e=>{}),o(u(t))},edit:t=>{const r={RoleId:t.data.RoleId,Taskname:"CreateInitialize"};o(h(r)).then(e=>{e.payload.transtatus.result==!0&&f.push("/home/cRole")}).catch(e=>{}),o(u(t))},delete:t=>{j(`Are you sure you want to inactive this ${t.data.RoleName}?`,"Confirmation",()=>{let r={RoleId:t.data.RoleId};o(A(r)).then(e=>{var a,n;e.payload.transtatus.result==!0?((a=d.current)==null||a.show({severity:"success",summary:"Success Message",detail:e.payload.transtatus.lstErrorItem[0].Message}),c()):e.payload.transtatus.result==!1&&((n=d.current)==null||n.show({severity:"error",summary:"Error Message",detail:e.payload.transtatus.lstErrorItem[0].Message}))}).catch(e=>{var a;(a=d.current)==null||a.show({severity:"error",summary:"Error Message",detail:JSON.stringify(e)})})},()=>{})}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"inner-page-container",children:[s.jsx(M,{pageTitle:m.pageTitle,pageConfig:m}),s.jsx("div",{className:"form-container scroll-y",children:s.jsx("div",{className:"white",children:s.jsx("div",{className:"widget-body",children:s.jsx("div",{className:"card",children:s.jsx(w,{handleActions:x,data:g,loading:y,pageConfig:m})})})})})]})}),s.jsx(E,{}),s.jsx(I,{toast:d})]})};export{D as default};
