import{a as k,u as A,r as y,p as D,y as N,b as H,c as R,t as I,U as B,D as J,j as t,F as Z,B as j,n,A as z,d as G,O as K,E as Q}from"./index-25a41ef1.js";import{a as W}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const le=()=>{const w=k(),p=A(),i=y.useRef(null);y.useState([]);const[L,b]=y.useState([]),[E,S]=y.useState([]),[V,x]=y.useState(!1);y.useEffect(()=>{D()}),y.useEffect(()=>{if(e!=null){if(c==!1){const l={CompanyId:e.CompanyId,Taskname:"CREATEINITIALIZE"};p(N(l)),b(q.filter(u=>u.CountryId==e.CountryId)),S(P.filter(u=>u.StateId==e.StateId))}}else p(N({CompanyId:0,Taskname:"CREATEINITIALIZE"}))},[]);const{allCompanies:X,createOrEdit:Y,loading:v,error:_,CompanyList:$,StatusList:M,CountryList:F,CityList:P,StateList:q,isView:r,isCreate:c,HdrTable:e}=H(l=>l.company),a=R({initialValues:{CompanyName:e!=null?e.CompanyName:"",CountryId:e!=null?e.CountryId:"",StateId:e!=null?e.StateId:"",CityId:e!=null?e.CityId:"",CompanyCode:e!=null?e.CompanyCode:"",Mail:e!=null?e.Mail:"",Host:e!=null?e.Host:"",Port:e!=null?e.Port:"",UserName:e!=null?e.UserName:"",Password:e!=null?e.Password:"",Status:e!=null?e.Status:1},validationSchema:W,onSubmit:(l,{resetForm:u})=>{var f,h;let d={Company:{CompanyId:e!=null?e.CompanyId:0,CompanyName:l.CompanyName,CompanyCode:e!=null?e.CompanyCode:"",Mail:l.Mail,Host:l.Host,Port:l.Port,UserName:l.UserName,Password:l.Password,Status:l.Status,CreatedBy:e!=null?e.CreatedBy:localStorage.UserId,CreatedOn:e!=null?I(e.CreatedOn):I(new Date),ModifiedBy:e!=null?localStorage.UserId:null,ModifiedOn:e!=null?I(new Date):null,CountryId:l.CountryId,StateId:l.StateId,CityId:l.CityId}};if(e!=null){if(e.isCreate!=!1)try{p(B(d)).then(s=>{var m,C;(s.payload!=null||!s.payload)&&(s.payload.transtatus.result==!0?((m=i.current)==null||m.show({severity:"success",summary:"Success Message",detail:s.payload.transtatus.lstErrorItem[0].Message}),u(),setTimeout(()=>{w.push("/home/vCompany")},800)):s.payload.transtatus.result==!1&&((C=i.current)==null||C.show({severity:"error",summary:"Error Message",detail:s.payload.transtatus.lstErrorItem[0].Message})))})}catch(o){(f=i.current)==null||f.show({severity:"warn",summary:"Error Message",detail:o})}}else try{p(J(d)).then(s=>{var m,C;x(!0),(s.payload!=null||!s.payload)&&(s.payload.transtatus.result==!0?(x(!1),(m=i.current)==null||m.show({severity:"success",summary:"Success Message",detail:s.payload.transtatus.lstErrorItem[0].Message}),u()):s.payload.transtatus.result==!1&&(x(!1),(C=i.current)==null||C.show({severity:"warn",summary:"Error Message",detail:s.payload.transtatus.lstErrorItem[0].Message})))}).catch(s=>{var m;(m=i.current)==null||m.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(s.payload)})})}catch(o){(h=i.current)==null||h.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(o.payload)})}}}),O=()=>{a.resetForm(),b([]),S([])},T=(l,u,d)=>{a.setFieldValue("StateId",null),a.setFieldValue("CityId",null),a.setFieldValue(l,d);var h=p(K({Type:"OnChangeCountry",CountryId:d}));h.then(o=>{b(o.payload.StateList)}).catch(o=>{var s;(s=i.current)==null||s.show({severity:"error",detail:"Error",summary:o})}),S([])},U=(l,u,d)=>{a.setFieldValue("CityId",null),a.setFieldValue(l,d);var h=p(Q({Type:"OnChangeState",StateId:d}));h.then(o=>{S(o.payload.CityList)}).catch(o=>{var s;(s=i.current)==null||s.show({severity:"error",detail:"Error",summary:o})})},g=(l,u,d)=>{a.setFieldValue(l,d)};return t.jsxs(t.Fragment,{children:[t.jsx(Z,{initialValues:a.initialValues,validationSchema:a.validationSchema,onSubmit:a.handleSubmit,children:t.jsx("div",{className:"page-container",children:t.jsxs("div",{className:"inner-page-container",children:[t.jsx("div",{className:"page-title",children:t.jsxs("div",{className:"grid grid-nogutter",children:[t.jsx("div",{className:"md:col-6",children:t.jsx("h1",{children:"Company"})}),t.jsx("div",{className:"md:col-6 text-right",children:t.jsxs("div",{className:"action-btn",children:[t.jsxs(t.Fragment,{children:[t.jsx(j,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",disabled:!!(r||V),type:"submit",onClick:()=>a.handleSubmit()}),t.jsx(j,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",disabled:!!(r||c==!1),className:"text-center",onClick:()=>O()})]}),t.jsx(j,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{w.push("/home/vCompany")}})]})})]})}),t.jsx("div",{className:"form-container scroll-y",children:t.jsx("form",{children:t.jsx("div",{className:"white",children:t.jsx("div",{className:"widget-body",children:t.jsx("div",{className:"normal-table",children:t.jsx("div",{className:"grid",children:v?t.jsx(z,{}):t.jsxs(t.Fragment,{children:[t.jsx(n,{type:"text",name:"CompanyCode",label:"Company Code",options:"",show:c==null||c==!1,required:!0,disable:!!(r||c==!1||c!=null),optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"text",name:"CompanyName",label:"Company Name",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"select",name:"CountryId",label:"Country",options:F,show:!0,required:!0,disable:!!r,optionLabel:"CountryName",optionValue:"CountryId",handleSelect:T,formik:a,fldStyle:"col-12 md:col-3",showFilter:!0}),t.jsx(n,{type:"select",name:"StateId",label:"State",options:L,show:!0,required:!0,disable:!!r,optionLabel:"StateName",optionValue:"StateId",handleSelect:U,formik:a,fldStyle:"col-12 md:col-3",showFilter:!0}),t.jsx(n,{type:"select",name:"CityId",label:"City",options:E,show:!0,required:!0,disable:!!r,optionLabel:"CityName",optionValue:"CityId",handleSelect:g,formik:a,fldStyle:"col-12 md:col-3",showFilter:!0}),t.jsx(n,{type:"text",name:"Mail",label:"Mail ID",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"text",name:"Host",label:"Host",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"text",name:"Port",label:"Port",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"text",name:"UserName",label:"User Name",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"text",name:"Password",label:"Password",show:!0,required:!0,disable:!!r,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:a}),t.jsx(n,{type:"select",name:"Status",label:"Status",options:M,show:!0,required:!0,disable:!!r||c==null||c==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:g,formik:a,fldStyle:"col-12 md:col-3"})]})})})})})})})]})})}),t.jsx(G,{toast:i})]})};export{le as default};
