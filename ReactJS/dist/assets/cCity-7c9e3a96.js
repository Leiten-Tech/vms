import{u as V,r as m,a as O,b as k,p as A,T as R,c as q,t as b,W as B,X as D,j as e,F as T,B as g,n as c,A as P,d as H,Y as J}from"./index-25a41ef1.js";import{c as v}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const G=()=>{const p=V(),r=m.useRef(null),j=O(),[N,h]=m.useState([]),{isCreate:l,isView:o,createEditData:U,loading:w,error:K,HdrTable:t,CountryList:E,StatusList:L,StateList:f,CityList:W,OnChangeCountryList:X}=k(n=>n.city);m.useEffect(()=>{A()}),m.useEffect(()=>{l==!0?p(R({CityId:0,Taskname:"CREATEINITIALIZE"})):h(f)},[]),m.useEffect(()=>{h(f)},[f]);const s=q({initialValues:{CityId:t!=null?t.CityId:0,CountryId:t!=null?+t.CountryId:null,StateId:t!=null?+t.StateId:null,CityName:t!=null?t.CityName:"",CityCode:t!=null?t.CityCode:"",CompanyId:t!=null?t.CompanyId:localStorage.CompanyId,PlantId:t!=null?t.PlantId:localStorage.PlantId,Status:t!=null?t.Status:1,CreatedBy:t!=null?t.CreatedBy:localStorage.UserId,CreatedOn:t!=null?b(t.CreatedOn):b(new Date),ModifiedBy:t!=null?localStorage.UserId:null,ModifiedOn:t!=null?b(new Date):null},validationSchema:v,onSubmit:(n,{resetForm:C})=>{var x,S;let u={City:n};if(t!=null){if(t.isCreate!=!1)try{p(B(u)).then(a=>{var d,y;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((d=r.current)==null||d.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),C(),setTimeout(()=>{j.push("/home/vCity")},800)):a.payload.transtatus.result==!1&&((y=r.current)==null||y.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))})}catch(i){(x=r.current)==null||x.show({severity:"warn",summary:"Error Message",detail:i})}}else try{p(D(u)).then(a=>{var d,y;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((d=r.current)==null||d.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),C()):a.payload.transtatus.result==!1&&((y=r.current)==null||y.show({severity:"warn",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))}).catch(a=>{var d;(d=r.current)==null||d.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(a.payload)})})}catch(i){(S=r.current)==null||S.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(i.payload)})}}}),M=()=>{s.resetForm(),h([])},I=(n,C,u)=>{s.setFieldValue(n,u)},F=(n,C,u)=>{s.setFieldValue(n,u),s.setFieldValue("StateId",null);var S=p(J({CountryId:u}));S.then(i=>{h(i.payload.StateList)}).catch(i=>{var a;(a=r.current)==null||a.show({severity:"error",detail:"Error",summary:i})})};return e.jsxs(e.Fragment,{children:[e.jsx(T,{initialValues:s.initialValues,validationSchema:v,onSubmit:s.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"City"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(g,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",type:"submit",onClick:()=>s.handleSubmit(),disabled:!!o}),e.jsx(g,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(o||l==!1),onClick:()=>M()})]}),e.jsx(g,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{j.push("/home/vCity")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:w?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"text",name:"CityCode",label:"City Code",options:"",show:l==null||l==!1,required:!0,disable:!!(o||l==!1||l!=null),optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(c,{type:"select",name:"CountryId",label:"Country Name",options:E,show:!0,required:!0,optionLabel:"CountryName",optionValue:"CountryId",handleSelect:F,disable:o||!l,formik:s,fldStyle:"col-12 md:col-3",showFilter:!0}),e.jsx(c,{type:"select",name:"StateId",label:"State Name",options:N,show:!0,required:!0,disable:o||!l,optionLabel:"StateName",optionValue:"StateId",handleSelect:I,formik:s,fldStyle:"col-12 md:col-3",showFilter:!0}),e.jsx(c,{type:"text",name:"CityCode",label:"City Code",options:"",show:!1,required:!0,disabled:!!(o||l==!1),optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-3",onKeyPress:()=>{}}),e.jsx(c,{type:"text",name:"CityName",label:"City Name",show:!0,required:!0,disable:!!o,optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-3"}),e.jsx(c,{type:"select",name:"Status",label:"Status",options:L,show:!0,required:!0,disable:!!o||l==null||l==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:I,formik:s,fldStyle:"col-12 md:col-3"})]})})})})})})})]})})}),e.jsx(H,{toast:r})]})};export{G as default};
