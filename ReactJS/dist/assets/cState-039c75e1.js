import{a as D,u as R,r as d,p as P,i as E,b as S,c as q,t as b,k as A,m as B,j as e,F as T,B as g,n as x,A as O,d as U}from"./index-25a41ef1.js";import{S as z}from"./Master-b11b8a2f.js";import{p as H}from"./PermissionService-9ad252b6.js";import"./index.esm-21a4a4d3.js";const $=()=>{const v=D(),h=R(),r=d.useRef(null),[I,i]=d.useState(!1),[J,F]=d.useState();d.useEffect(()=>{P()}),d.useEffect(()=>{if(F(H({screenId:5})),a!=null){if(o==!1){const t={Stateid:a.StateId,Taskname:"CreateInitialize"};h(E(t))}}else h(E({Stateid:0,Taskname:"CreateInitialize"}))},[]),d.useEffect(()=>{}),S(t=>t.states.states),S(t=>t.states);const M=S(t=>t.states.CountryList),V=S(t=>t.states.StatusList),{isCreate:o,isView:u,createEditData:a,loading:L,error:K,StatusList:G,CountryList:Q,HdrTable:c,StateUpdateRes:W}=S(t=>t.states),l=q({initialValues:{CountryName:a!=null?a.CountryId:"",StateCode:a!=null?a.StateCode:"",StateName:a!=null?a.StateName:"",Status:a!=null?a.Status:1},validationSchema:z,onSubmit:(t,{resetForm:y})=>{var C,w;i(!0);let f={State:{countryid:t.CountryName,statename:t.StateName,statecode:a!=null?a.StateCode:"",status:t.Status,createdby:c!=null?c.CreatedBy:localStorage.UserId,createdon:c!=null?b(c.CreatedOn):b(new Date),modifiedby:c!=null?+localStorage.UserId:null,modifiedon:c!=null?b(new Date):null,Stateid:a!=null?a.StateId:0}};if(a!=null){if(a.isCreate!=!1)try{h(A(f)).then(s=>{var n,p;(s.payload!=null||!s.payload)&&(s.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:s.payload.transtatus.lstErrorItem[0].Message}),i(!1),y(),setTimeout(()=>{v.push("/home/vState")},800)):s.payload.transtatus.result==!1&&(i(!1),(p=r.current)==null||p.show({severity:"error",summary:"Error Message",detail:s.payload.transtatus.lstErrorItem[0].Message})))})}catch(m){i(!1),(C=r.current)==null||C.show({severity:"warn",summary:"Error Message",detail:m})}}else try{h(B(f)).then(s=>{var n,p;(s.payload!=null||!s.payload)&&(s.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:s.payload.transtatus.lstErrorItem[0].Message}),i(!1),y()):s.payload.transtatus.result==!1&&(i(!1),(p=r.current)==null||p.show({severity:"warn",summary:"Error Message",detail:s.payload.transtatus.lstErrorItem[0].Message})))}).catch(s=>{var n;i(!1),(n=r.current)==null||n.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(s.payload)})})}catch(m){i(!1),(w=r.current)==null||w.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(m.payload)})}}}),k=()=>{l.resetForm()},j=(t,y,f)=>{l.setFieldValue(t,f)},N=t=>{t.target.value.length>=10&&t.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsx(T,{initialValues:l.initialValues,validationSchema:l.validationSchema,onSubmit:l.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"State"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(g,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",type:"submit",disabled:!!(u||I),onClick:()=>l.handleSubmit()}),e.jsx(g,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(u||o==!1),onClick:()=>k()})]}),e.jsx(g,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{v.push("/home/vState")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:L?e.jsx(O,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"select",name:"CountryName",label:"Country Name",options:M,show:!0,required:!0,disable:u||!o,optionLabel:"CountryName",optionValue:"CountryId",handleSelect:j,fldStyle:"col-12 md:col-3",showFilter:!0,formik:l}),e.jsx(x,{type:"text",name:"StateCode",label:"State Code",options:"",show:o==!1,required:!0,disable:!!(u||o==!1),optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:N,fldStyle:"col-12 md:col-3",formik:l}),e.jsx(x,{type:"text",name:"StateName",label:"State Name",show:!0,required:!0,disable:!!u,optionLabel:"",optionValue:"",handleSelect:"",handleKeyPress:N,fldStyle:"col-12 md:col-3",formik:l}),e.jsx(x,{type:"select",name:"Status",label:"Status",options:V,show:!0,required:!0,disable:!!u||o==null||o==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:j,fldStyle:"col-12 md:col-3",showFilter:!1,showClear:!1,formik:l})]})})})})})})})]})})}),e.jsx(U,{toast:r})]})};export{$ as default};
