import{r as o,a as j,p as A,u as I,b as c,G as w,H as f,j as l,C as O,d as P,J as b,g as R,K as D}from"./index-25a41ef1.js";import{P as B,A as H}from"./PageHeader-b76b68bd.js";import{e as N}from"./ExportService-4b3a6c99.js";import"./column.esm-11a46c7b.js";import"./index.esm-9a713e1a.js";import"./inputswitch.esm-a89edc74.js";import"./jspdf.es.min-40ee8370.js";const Q=()=>{const[v,S]=o.useState(null),u=j(),n=o.useRef(null);o.useEffect(()=>{A()});const i=I(),E=c(e=>e.employee.HdrTable),h=c(e=>e.employee.EmployeeList),x=c(e=>e.employee.loading);c(e=>e.employee.reload);const[C,g]=o.useState(!1);o.useEffect(()=>{p()},[]);const p=()=>i(w({EmployeeId:0}));o.useEffect(()=>{S(h)},[h]),o.useEffect(()=>{E!=null&&C&&u.push("/home/cEmployee")},[E]);const[y,F]=o.useState({pageTitle:"Employee",pageHeader:{pageActions:[{create:!0,clear:!1,save:!1,createQuery:"/home/cEmployee",createDispatch:()=>i(f({data:null,isView:!1,isCreate:!0}))}]},tableCheckSelection:!1,tableAction:!0,tableActionStyle:{textAlign:"center",minWidth:"10rem"},tableRows:10,tableRowsOptions:[5,10,25],tablePagination:!0,tableActions:[{title:"View",name:"view"},{title:"Edit",name:"edit"},{title:"Delete",name:"delete"}],tableColumns:[{title:"Employee Code",name:"EmployeeCode",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem"}},{title:"Employee Name",name:"EmployeeName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem",maxWidth:"20rem"}},{title:"Role",name:"RoleName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Plant",name:"PlantName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Department",name:"DepartmentName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem"}},{title:"Contact No",name:"PrimaryMobileNo",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Mail ID",name:"Email",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Created By",name:"CreatedByName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Created On",name:"CreatedOn",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem"}},{title:"Modified By",name:"ModifiedByName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Modified On",name:"ModifiedOn",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"16rem"}},{title:"Status",name:"StatusName",sort:!0,avatar:!1,badge:!0,colStyle:{minWidth:"6rem",textAlign:"center"}}],tableExport:e=>{p().then(d=>{M(d.payload.EmployeeList,e).then(t=>{e==="pdf"?N.Export("Employee",t,"pdf"):e==="excel"&&N.Export("Employee",t,"excel")}).catch(t=>{console.error(t.message)})})}}),M=(e,s)=>new Promise((d,t)=>{let r=[];e.length>0?(e.forEach(a=>{let m={"Employee Code":a.EmployeeCode,"Employee Name":a.EmployeeName,Role:a.RoleName,Plant:a.PlantName,Department:a.DepartmentName,"Contact No":a.PrimaryMobileNo,"Mail ID":a.Email,Status:a.StatusName};s==="excel"&&(m["Created By"]=a.CreatedByName,m["Created On"]=a.CreatedOn,m["Modified By"]=a.ModifiedByName,m["Modified On"]=a.ModifiedOn),r.push(m)}),d(r)):t(new Error("No data available for export."))}),W={view:e=>{const s={EmployeeId:e.data.EmployeeId};i(b(s)),i(f(e)),g(!0)},edit:e=>{const s={EmployeeId:e.data.EmployeeId};i(b(s)).then(t=>{t.payload.transtatus.result==!0&&u.push("/home/cEmployee")}).catch(t=>{}),i(f(e)),g(!0)},delete:e=>{R(`Are you sure you want to inactive this Employee ${e.data.EmployeeName}?`,"Confirmation",()=>{let s={EmployeeId:e.data.EmployeeId};i(D(s)).then(t=>{var r,a;t.payload.transtatus.result==!0?((r=n.current)==null||r.show({severity:"success",summary:"Success Message",detail:t.payload.transtatus.lstErrorItem[0].Message}),p()):t.payload.transtatus.result==!1&&((a=n.current)==null||a.show({severity:"error",summary:"Error Message",detail:t.payload.transtatus.lstErrorItem[0].Message}))}).catch(t=>{var r;(r=n.current)==null||r.show({severity:"error",summary:"Error Message",detail:JSON.stringify(t)})})},()=>{})}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"page-container",children:l.jsxs("div",{className:"inner-page-container",children:[l.jsx(B,{pageTitle:y.pageTitle,pageConfig:y}),l.jsx("div",{className:"form-container scroll-y",children:l.jsx("div",{className:"white",children:l.jsx("div",{className:"widget-body",children:l.jsx("div",{className:"card",children:l.jsx(H,{handleActions:W,data:v,loading:x,pageConfig:y})})})})})]})}),l.jsx(O,{}),l.jsx(P,{toast:n})]})};export{Q as default};
