import{r as p,a as N,a9 as H,j as t,A as U,I as W,B as a,az as f,u as G}from"./index-25a41ef1.js";import{D as q,C as x}from"./column.esm-11a46c7b.js";import{I as z}from"./inputswitch.esm-a89edc74.js";const K=(o,c)=>t.jsx("div",{children:o[c.name]||"-"},o[c.name]),Z=o=>{const{data:c,pageConfig:s,selectedData:u,setSelectedData:m,globalFilter:r,loading:C,handleActions:l,viewdisabled:v,editdisabled:g,deletedisabled:j,screenPermissions:h}=o,[k,P]=p.useState(""),n=N(),[Q,V]=p.useState(!1);p.useState(!1);const E=e=>{if(n&&["/home/vVisitorEntry","/home/vVisitorManagement"].includes(n.location.pathname))return e.VisitorTypeId!=36;if(["/home/vWorkPermit"].includes(n.location.pathname))return console.log(e),e.Status==75||e.Status==74||e.Status==76},I=e=>{if(n){if(["/home/vVisitorEntry","/home/vVisitorManagement"].includes(n.location.pathname)&&(e.Status==75||e.Status==76||e.Status==74))return!0;if(["/home/vWorkPermit"].includes(n.location.pathname))return!(e.Status!=75&&e.PrimaryUserId==+localStorage.UserId)}},b=e=>{if(n){if(["/home/vVisitorEntry","/home/vVisitorManagement"].includes(n.location.pathname))return!(e.VisitorTypeId==35&&e.IsAppointmentBooking==!1&&e.Status==74);if(["/home/vWorkPermit"].includes(n.location.pathname))return!((e.Status==74||e.Status==1)&&e.DocStatus==75&&e.PrimaryUserId==+localStorage.UserId)}},F=e=>{if(n&&["/home/vVisitorEntry","/home/vVisitorManagement"].includes(n.location.pathname)){if(e.Status==73)return!1;if([65,66].includes(e.VisitorTypeId))return!0}},T=e=>t.jsx("div",{className:"action-btn",children:t.jsx(f.Fragment,{children:s.tableActions.map(i=>i.name==="view"&&t.jsx(a,{label:"",title:"View",icon:"pi pi-eye",className:"mr-2 p-1",disabled:v||!1,onClick:()=>l.view({data:e,isView:!0})})||i.name==="edit"&&t.jsx(a,{label:"",title:"Edit",icon:"pi pi-pencil",className:"mr-2 p-1 p-button-success",disabled:g||!1||E(e),onClick:()=>l.edit({data:e,isView:!1})})||i.name==="delete"&&t.jsx(a,{label:"",severity:"danger",icon:"pi pi-trash",title:"Delete",className:"mr-2 p-1",disabled:j||e.Status==2||I(e),onClick:()=>l.delete({data:e,isView:!1})})||i.name==="print"&&t.jsx(a,{label:"",severity:"warning",icon:"pi pi-print",title:"Print",className:"mr-2 p-1",disabled:F(e),onClick:()=>l.print({data:e,isView:!1})})||i.name==="self_approval"&&t.jsx(a,{label:"",severity:"info",icon:"pi pi-check-square",title:"Self Approval",className:"mr-2 p-1",disabled:b(e),onClick:()=>{l.approval({data:e,isView:!1})}})||i.name==="approval"&&t.jsx(a,{label:"",severity:"info",icon:"pi pi-check",title:"Approval",className:"mr-2 p-1",disabled:b(e),onClick:()=>{l.approve({data:e,isView:!1})}})||i.name==="reject"&&t.jsx(a,{label:"",severity:"danger",icon:"pi pi-times-circle",title:"Reject",className:"mr-2 p-1",disabled:b(e),onClick:()=>{l.reject({data:e,isView:!1})}}))})}),M=e=>t.jsx("div",{className:"action-btn",children:t.jsx(f.Fragment,{children:s&&s.hasOwnProperty("tableAddActions")&&(s==null?void 0:s.tableAddActions.map(i=>i.name==="print"&&t.jsx(a,{label:"",severity:"warning",icon:"pi pi-print",title:i.title,className:"mr-2 p-1",disabled:e.Status==2,onClick:()=>l.print({data:e,isView:!1,rowItem:i})})))})}),R=e=>t.jsx("div",{className:"action-btn",children:t.jsx(f.Fragment,{children:s&&s.hasOwnProperty("tableAddActions")&&(s==null?void 0:s.tableAddActions.map(i=>i.name==="is_auto_approve"&&t.jsx(z,{checked:e.IsAutoApprove,onChange:d=>{V(d.value),l.isAutoApprove({data:d.value,rowData:e,isView:!1})}})))})}),L=()=>{const e=d=>{const S=d.target.value;let A={...y};A.global.value=S,B(A),P(S)},i=["/home/vApprovalConfiguration"];return t.jsxs("div",{className:"flex justify-content-between",children:[t.jsxs("span",{className:"p-input-icon-left",children:[t.jsx("i",{className:"pi pi-search"}),t.jsx(W,{value:k,onChange:e,placeholder:"Search"})]}),!n.location.pathname.includes(i)&&(h!=null&&h._Print)?t.jsx("div",{className:"flex align-items-center justify-content-end gap-2",children:t.jsxs("div",{className:"action-btn",children:[t.jsx(a,{type:"button",icon:"pi pi-file-excel",title:"Export Excel",severity:"success",onClick:()=>s.tableExport("excel"),"data-pr-tooltip":"XLS"}),t.jsx(a,{type:"button",icon:"pi pi-file-pdf",title:"Export PDF",severity:"warning",onClick:()=>s.tableExport("pdf"),"data-pr-tooltip":"PDF"})]})}):null]})},[y,B]=p.useState({global:{value:null,matchMode:H.CONTAINS}}),O=e=>T(e),_=(e,i)=>{if(i.badge)return K(e,i);if(i.action)return i.colOn==="print"?M(e):R(e);if(!i.badge||!i.action)return t.jsx(t.Fragment,{children:e[i.name]})};return t.jsx(t.Fragment,{children:C?t.jsx(U,{}):t.jsxs(q,{value:c,showGridlines:!0,filters:y,selection:u,emptyMessage:"No Data Found",style:{minWidth:"50rem"},onSelectionChange:e=>m(e.value),dataKey:"id",paginator:s.tablePagination,rows:s.tableRows,rowsPerPageOptions:[5,10,25,50,100],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Entries",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",globalFilter:r,header:L,children:[s.tableAction?t.jsx(x,{field:"Action",header:"Action",style:s.tableActionStyle,body:O,headerClassName:"text-center"}):null,s.tableCheckSelection?t.jsx(x,{selectionMode:"multiple",exportable:!1}):null,s.tableColumns.length>0&&s.tableColumns.map(e=>t.jsx(x,{field:e.name,header:e.title,sortable:e.sort,className:"wrap-cell",style:e.colStyle,body:i=>_(i,e)},e.name))]})})},$=o=>{const c=N();G();const{pageTitle:s,handleClickSubmit:u,pageConfig:m}=o;return t.jsx("div",{className:"page-title",children:t.jsxs("div",{className:"grid grid-nogutter",children:[t.jsx("div",{className:"md:col-6",children:t.jsx("h1",{children:s})}),t.jsx("div",{className:"md:col-6 text-right",children:t.jsx("div",{className:"action-btn",children:m.pageHeader.pageActions.map(r=>t.jsxs(t.Fragment,{children:[r.save==!0?t.jsx(a,{label:"",title:"Save",icon:"pi pi-eye",className:"text-center",onClick:u}):null,r.clear==!0?t.jsx(a,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center"}):null,r.create==!0?t.jsx(a,{label:"",icon:"pi pi-plus",title:"Create",className:"p-button p-button-success text-center",onClick:()=>{r.createDispatch(),c.push(r.createQuery)}}):null]}))})},s)]})})};export{Z as A,$ as P};
