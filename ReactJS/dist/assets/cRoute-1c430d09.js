import{a as v,u as C,r as y,bX as b,b as w,c as D,t as x,bZ as F,b_ as E,p as M,j as e,F as T,B as f,n as u,A as V,d as k}from"./index-25a41ef1.js";import{i as K}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const Z=()=>{const R=v(),p=C(),r=y.useRef(null);y.useEffect(()=>{if(t!=null){if(i==!1){const a={RouteId:t.RouteId,Taskname:"CREATEINITIALIZE"};p(b(a))}}else p(b({RouteId:0,Taskname:"CREATEINITIALIZE"}))},[]);const{isCreate:i,isView:l,createOrEdit:A,RouteList:q,Route:B,loading:j,error:O,StatusList:I,HdrTable:t}=w(a=>a.route),s=D({initialValues:{RouteCode:t!=null?t.RouteCode:"",RouteName:t!=null?t.RouteName:"",FromLocation:t!=null?t.FromLocation:"",ToLocation:t!=null?t.ToLocation:"",RouteDesc:t!=null?t.RouteDesc:"",RouteDistanceInKm:t!=null?parseFloat(t.RouteDistanceInKm):"",Status:t!=null?t.Status:1},validationSchema:K,onSubmit:(a,{resetForm:c})=>{var S,g;let h={Route:{RouteId:t!=null?t.RouteId:0,RouteCode:t!=null?t.RouteCode:"",RouteName:a.RouteName,RouteDesc:a.RouteDesc,RouteDistanceInKm:a.RouteDistanceInKm,FromLocation:a.FromLocation,ToLocation:a.ToLocation,CompanyId:localStorage.CompanyId,PlantId:localStorage.PlantId,Status:a.Status,CreatedBy:t!=null?t.CreatedBy:localStorage.UserId,CreatedOn:t!=null?x(t.CreatedOn):x(new Date),ModifiedBy:t!=null?+localStorage.UserId:null,ModifiedOn:t!=null?x(new Date):null}};if(t!=null){if(t.isCreate!=!1)try{p(F(h)).then(o=>{var n,m;(o.payload!=null||!o.payload)&&(o.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:o.payload.transtatus.lstErrorItem[0].Message}),c(),setTimeout(()=>{R.push("/home/vRoute")},800)):o.payload.transtatus.result==!1&&((m=r.current)==null||m.show({severity:"error",summary:"Error Message",detail:o.payload.transtatus.lstErrorItem[0].Message})))})}catch(d){(S=r.current)==null||S.show({severity:"warn",summary:"Error Message",detail:d})}}else try{p(E(h)).then(o=>{var n,m;(o.payload!=null||!o.payload)&&(o.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:o.payload.transtatus.lstErrorItem[0].Message}),c()):o.payload.transtatus.result==!1&&((m=r.current)==null||m.show({severity:"warn",summary:"Error Message",detail:o.payload.transtatus.lstErrorItem[0].Message})))}).catch(o=>{var n;(n=r.current)==null||n.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(o.payload)})})}catch(d){(g=r.current)==null||g.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(d.payload)})}}}),N=()=>{s.resetForm()};y.useEffect(()=>{M()});const L=(a,c,h)=>{s.setFieldValue(a,h)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{initialValues:s.initialValues,validationSchema:s.validationSchema,onSubmit:s.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Route"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(f,{label:"",title:"Save",icon:"pi pi-save",disabled:!!l,className:"text-center",type:"submit",onClick:()=>s.handleSubmit()}),e.jsx(f,{label:"",severity:"danger",icon:"pi pi-trash",disabled:!!(l||i==!1),title:"Clear",className:"text-center",onClick:()=>N()})]}),e.jsx(f,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{R.push("/home/vRoute")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:j?e.jsx(V,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-12 md:col-9",children:e.jsxs("div",{className:"grid",children:[e.jsx(u,{type:"text",name:"RouteCode",label:"Route Code",options:"",show:i==null||i==!1,required:!0,disable:!!(l||i==!1||i!=null),optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:s}),e.jsx(u,{type:"text",name:"RouteName",label:"Route Name",options:"",show:!0,required:!0,disable:!!l,optionLabel:"RouteName",optionValue:"RouteId",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4",maxlength:50}),e.jsx(u,{type:"text",name:"FromLocation",label:"From Location",options:"",show:!0,required:!0,disable:!!l,optionLabel:"FromLocation",optionValue:"FromLocation",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4",maxlength:90}),e.jsx(u,{type:"text",name:"ToLocation",label:"To Location",options:"",show:!0,required:!0,disable:!!l,optionLabel:"ToLocation",optionValue:"ToLocation",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4",maxlength:90}),e.jsx(u,{type:"text",inputMode:"numeric",value:s.values.RouteDistanceInKm||"",name:"RouteDistanceInKm",label:"Distance(in Kms)",options:"",show:!0,required:!0,disable:!!l,optionLabel:"RouteDistanceInKm",optionValue:"RouteDistanceInKm",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4",maxFractionDigits:2,minFractionDigits:2,onChange:a=>{const c=a.target.value;isNaN(c)||s.handleChange(a)},mode:"decimal",max:999999999}),e.jsx(u,{type:"select",name:"Status",label:"Status",options:I,show:!0,required:!0,disable:!!l||i==null||i==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:L,formik:s,fldStyle:"col-12 md:col-4"})]})}),e.jsx(u,{type:"textarea",name:"RouteDesc",label:"Route Description",options:"",show:!0,required:!1,disable:!!l,optionLabel:"RouteDesc",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-3",maxlength:500,style:{maxHeight:"100px",overflowY:"auto"}})]})})})})})})})]})})}),e.jsx(k,{toast:r})]})};export{Z as default};
