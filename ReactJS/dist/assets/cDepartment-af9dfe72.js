import{a as C,u as w,r as h,be as I,b as M,c as E,t as y,bT as F,bU as V,p as k,j as e,F as L,B as f,n as x,A as B,d as O}from"./index-25a41ef1.js";import{D as R}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const H=()=>{const S=C(),m=w(),r=h.useRef(null);h.useEffect(()=>{l==!0&&m(I({Type:"CreateInitialize",DeptId:0}))},[]);const{isCreate:l,isView:o,createOrEdit:A,DepartmentList:T,loading:b,error:U,StatusList:j,HdrTable:t}=M(i=>i.department),s=E({initialValues:{DepartmenttId:t!=null?t.DepartmentId:0,DepartmentCode:t!=null?t.DepartmentCode:"",DepartmentName:t!=null?t.DepartmentName:"",Status:t!=null?t.Status:1},validationSchema:R,onSubmit:(i,{resetForm:p})=>{var g,D;let u={Department:{DepartmentId:t!=null?t.DepartmentId:0,DepartmentName:i.DepartmentName,DepartmentCode:t!=null?t.DepartmentCode:"",CompanyId:localStorage.CompanyId,PlantId:localStorage.PlantId,Status:i.Status,CreatedBy:t!=null?t.CreatedBy:localStorage.UserId,CreatedOn:t!=null?y(t.CreatedOn):y(new Date),ModifiedBy:t!=null?localStorage.UserId:null,ModifiedOn:t!=null?y(new Date):null}};if(t!=null){if(t.isCreate!=!1)try{m(F(u)).then(a=>{var n,c;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),p(),setTimeout(()=>{S.push("/home/vDepartment")},800)):a.payload.transtatus.result==!1&&((c=r.current)==null||c.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))})}catch(d){(g=r.current)==null||g.show({severity:"warn",summary:"Error Message",detail:d})}}else try{m(V(u)).then(a=>{var n,c;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((n=r.current)==null||n.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),p()):a.payload.transtatus.result==!1&&((c=r.current)==null||c.show({severity:"warn",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))}).catch(a=>{var n;(n=r.current)==null||n.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(a.payload)})})}catch(d){(D=r.current)==null||D.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(d.payload)})}}}),v=()=>{s.resetForm()};h.useEffect(()=>{k()});const N=(i,p,u)=>{s.setFieldValue(i,u)};return e.jsxs(e.Fragment,{children:[e.jsx(L,{initialValues:s.initialValues,validationSchema:s.validationSchema,onSubmit:s.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Department"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(f,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",disabled:!!o,type:"submit",onClick:()=>s.handleSubmit()}),e.jsx(f,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",disabled:!!(o||l==!1),className:"text-center",onClick:()=>v()})]}),e.jsx(f,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{S.push("/home/vDepartment")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:b?e.jsx(B,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"text",name:"DepartmentCode",label:"Department Code",options:"",show:l==null||l==!1,required:!0,disable:!!(o||l==!1||l!=null),optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(x,{type:"text",name:"DepartmentName",label:"Department Name",show:!0,required:!0,disable:!!o,optionLabel:"DepartmentName",optionValue:"DepartmentId",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s,maxlength:90}),e.jsx(x,{type:"select",name:"Status",label:"Status",options:j,show:!0,required:!0,disable:!!o||l==null||l==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",fldStyle:"col-12 md:col-3",handleSelect:N,formik:s})]})})})})})})})]})})}),e.jsx(O,{toast:r})]})};export{H as default};
