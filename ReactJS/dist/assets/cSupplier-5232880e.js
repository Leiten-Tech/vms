import{a as U,r as I,u as G,p as H,b as Z,c9 as q,t as V,c as J,j as l,B as M,A as W,d as Y,F as z,n as s,cb as Q,cc as X,cd as _,ce as $}from"./index-25a41ef1.js";import{k as O}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const ee=N=>{const{isView:t,isCreate:n,SupplierTypeList:C,SupplierCategoryList:h,CountryList:j,Onchangecountry:m,Onchangestate:b,StatusList:x,handleSelect:f,handleOnChange:g,supplierForm:E,formik:a,tempStateList:L,tempCityList:v}=N;return l.jsx(z,{initialValues:E,validationSchema:O,onSubmit:onsubmit,children:l.jsx("div",{className:"white",children:l.jsx("div",{className:"widget-body",children:l.jsx("div",{className:"normal-table",children:l.jsxs("div",{className:"grid",children:[l.jsx("div",{className:"col-12 md:col-12",children:l.jsxs("div",{className:"grid",children:[l.jsx(s,{type:"text",name:"SupplierCode",label:"Supplier Code ",options:"",show:!1,required:!0,disable:!!(t||n==!1),optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"text",name:"SupplierName",label:"Supplier Name ",options:"",show:!0,required:!0,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"select",name:"SupplierCategoryId",label:"Supplier Category ",options:h,show:!0,required:!0,disable:!!t,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:f,handleOnChange:g,fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"select",name:"SupplierTypeId",label:"Supplier Type ",options:C,show:!0,required:!0,disable:!!t,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:f,handleOnChange:g,fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"text",name:"SupplierMobileNo",label:"Contact No",options:"",show:!0,required:!0,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15,minlength:9,keyfilter:"int"})]})}),l.jsx("div",{className:"col-12 md:col-12",children:l.jsxs("div",{className:"grid",children:[l.jsx(s,{type:"text",name:"SupplierMobileNo2",label:"Secondary Contact No",options:"",show:!0,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15,minlength:9,keyfilter:"int"}),l.jsx(s,{type:"text",name:"SupplierMailId",label:"Mail ID",options:"",show:!0,required:!0,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"text",name:"SupplierMailId2",label:"Secondary Mail ID",options:"",show:!1,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a}),l.jsx(s,{type:"text",name:"SupplierGstNo",label:"GST No ",options:"",show:!0,required:!0,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15}),l.jsx(s,{type:"text",name:"SupplierPanNo",label:"PAN No ",options:"",show:!0,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:10})]})}),l.jsx("div",{className:"col-12 md:col-12",children:l.jsxs("div",{className:"grid",children:[l.jsx(s,{type:"text",name:"SupplierTinNo",label:"TIN No",options:"",show:!0,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15}),l.jsx(s,{type:"text",name:"SupplierEccNo",label:"ECC No ",options:"",show:!0,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15}),l.jsx(s,{type:"text",name:"SupplierVatNo",label:"VAT No ",options:"",show:!0,required:!1,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-3",formik:a,maxlength:15}),l.jsx(s,{type:"select",name:"CountryId",label:"Country ",options:j,show:!0,required:!0,disable:!!t,optionLabel:"CountryName",optionValue:"CountryId",handleSelect:m,fldStyle:"col-12 md:col-3",formik:a})]})}),l.jsx("div",{className:"col-12 md:col-12",children:l.jsxs("div",{className:"grid",children:[l.jsx("div",{className:"col-12 md:col-9",children:l.jsxs("div",{className:"grid",children:[l.jsx(s,{type:"select",name:"StateId",label:"State ",options:L,show:!0,required:!0,disable:!!t,optionLabel:"StateName",optionValue:"StateId",handleSelect:b,fldStyle:"col-12 md:col-4",formik:a}),l.jsx(s,{type:"select",name:"CityId",label:"City ",options:v,show:!0,required:!0,disable:!!t,optionLabel:"CityName",optionValue:"CityId",handleSelect:f,fldStyle:"col-12 md:col-4",formik:a}),l.jsx(s,{type:"select",name:"Status",label:"Status ",options:x,show:!0,required:!0,disable:!!t||n==null||n==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:f,fldStyle:"col-12 md:col-4",formik:a})]})}),l.jsx("div",{className:"col-12 md:col-3",children:l.jsx("div",{className:"grid",children:l.jsx(s,{type:"textarea",name:"Address",label:"Address",options:"",show:!0,required:!0,disable:!!t,optionLabel:"",optionValue:"",handleSelect:"",formik:a,fldStyle:"col-12 md:col-12",style:{maxHeight:"100px",overflowY:"auto"},maxlength:500})})})]})})]})})})})})},re=()=>{const N=U(),t=I.useRef(null),n=G(),[C,h]=I.useState([]),[j,m]=I.useState([]);I.useEffect(()=>{H()});const{isCreate:b,isView:x,createEditData:f,loading:g,error:E,SupplierTypeList:a,SupplierCategoryList:L,StatusList:v,CountryList:k,StateList:F,CityList:T,SupplierHeader:e,StateUpdateRes:le}=Z(r=>r.supplier);I.useEffect(()=>{if(e!=null){if(b==!1){const r={SupplierId:e.SupplierId,Taskname:"CREATEINITIALIZE"};n(q(r)),h(F.filter(d=>d.CountryId==e.CountryId)),m(T.filter(d=>d.StateId==e.StateId))}}else n(q({SupplierId:0,Taskname:"CREATEINITIALIZE"}))},[]);const A={SupplierId:e!=null?e.SupplierId:0,SupplierCode:e!=null?e.SupplierCode:"",SupplierName:e!=null?e.SupplierName:"",SupplierTypeId:e!=null?e.SupplierTypeId:25,SupplierCategoryId:e!=null?e.SupplierCategoryId:23,SupplierPanNo:e!=null?e.SupplierPanNo:"",SupplierTinNo:e!=null?e.SupplierTinNo:"",SupplierEccNo:e!=null?e.SupplierEccNo:"",SupplierGstNo:e!=null?e.SupplierGstNo:"",SupplierCstNo:e!=null?e.SupplierCstNo:"",SupplierVatNo:e!=null?e.SupplierVatNo:"",SupplierMobileNo:e!=null?e.SupplierMobileNo:"",SupplierMobileNo2:e!=null?e.SupplierMobileNo2:"",SupplierMailId:e!=null?e.SupplierMailId:"",SupplierMailId2:e!=null?e.SupplierMailId2:"",Address:e!=null?e.Address:"",CompanyId:e!=null?e.CompanyId:localStorage.CompanyId,PlantId:e!=null?e.PlantId:localStorage.PlantId,CountryId:e!=null?e.CountryId:"",StateId:e!=null?e.StateId:"",CityId:e!=null?e.CityId:"",Status:e!=null?e.Status:1,CreatedBy:e!=null?e.CreatedBy:localStorage.UserId,CreatedOn:e!=null?V(e.CreatedOn):V(new Date),ModifiedBy:e!=null?localStorage.UserId:null,ModifiedOn:e!=null?V(new Date):null,SeriesId:e!=null?e.SeriesId:0,SupplierAreaCode:e!=null?e.SupplierAreaCode:0,SupplierIsLocal:e!=null?e.SupplierIsLocal:!1,SupplierImageName:e!=null?e.SupplierImageName:"",SupplierImageUrl:e!=null?e.SupplierImageUrl:""},o=J({initialValues:A,validationSchema:O,onSubmit:(r,{resetForm:d})=>{let c={Supplier:r,SupplierDetail:[]};if(b==!1){var p=n(Q(c));p.then(y=>{var i,S;y.payload.tranStatus.result==!0?((i=t.current)==null||i.show({severity:"success",summary:"Success Message",detail:y.payload.tranStatus.lstErrorItem[0].Message}),w(),setTimeout(()=>{N.push("/home/vSupplier")},800)):(S=t.current)==null||S.show({severity:"error",summary:"Error Message",detail:y.payload.tranStatus.lstErrorItem[0].Message})}).catch(y=>{var i;(i=t.current)==null||i.show({severity:"error",detail:"Error",summary:JSON.stringify(y)})})}else{var p=n(X(c));p.then(i=>{var S,P;i.payload.tranStatus.result==!0?((S=t.current)==null||S.show({severity:"success",summary:"Success Message",detail:i.payload.tranStatus.lstErrorItem[0].Message}),w()):(P=t.current)==null||P.show({severity:"warn",summary:"Warning Message",detail:i.payload.tranStatus.lstErrorItem[0].Message})}).catch(i=>{var S;(S=t.current)==null||S.show({severity:"error",summary:"Error Message",detail:"Error"})})}}}),D=(r,d,u)=>{o.setFieldValue(r,u)},K=(r,d,u)=>{o.setFieldValue(r??o[d][r],o,u)},B=(r,d,u)=>{var c;try{h([]),m([]),o.setFieldValue("StateId",null),o.setFieldValue("CityId",null),o.setFieldValue(r,u),n(_({CountryId:u})).then(i=>{h(i.payload.StateList)})}catch(p){(c=t.current)==null||c.show({severity:"error",detail:"Error",summary:p.message||"An error occurred"})}},R=(r,d,u)=>{var c;try{m([]),o.setFieldValue("CityId",null),o.setFieldValue(r,u),n($({StateId:u})).then(i=>{m(i.payload.CityList)})}catch(p){(c=t.current)==null||c.show({severity:"error",detail:"Error",summary:p.message||"An error occurred"})}},w=()=>{o.resetForm(),h([]),m([])};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"page-container",children:l.jsxs("div",{className:"inner-page-container",children:[l.jsx("div",{className:"page-title",children:l.jsxs("div",{className:"grid grid-nogutter",children:[l.jsx("div",{className:"md:col-6",children:l.jsx("h1",{children:"Supplier"})}),l.jsx("div",{className:"md:col-6 text-right",children:l.jsxs("div",{className:"action-btn",children:[l.jsxs(l.Fragment,{children:[l.jsx(M,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",type:"submit",disabled:x==!0,onClick:o.handleSubmit}),l.jsx(M,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(x||b==!1),onClick:()=>w()})]}),l.jsx(M,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{N.push("/home/vSupplier")}})]})})]})}),g?l.jsx(W,{}):l.jsx(l.Fragment,{children:l.jsx("div",{className:"form-container scroll-y",children:l.jsx(ee,{isView:x,isCreate:b,SupplierTypeList:a,SupplierCategoryList:L,CountryList:k,Onchangecountry:B,StateList:F,Onchangestate:R,CityList:T,StatusList:v,handleSelect:D,handleOnChange:K,supplierForm:A,formik:o,tempStateList:C,tempCityList:j})})})]})}),l.jsx(Y,{toast:t})]})};export{re as default};
