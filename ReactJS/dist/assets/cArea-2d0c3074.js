import{a as M,u as F,r as f,p as L,a_ as V,b as P,c as O,t as S,b0 as k,b1 as R,b2 as B,j as e,F as q,B as b,n as p,A as D,d as T}from"./index-25a41ef1.js";import{h as U}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const W=()=>{const g=M(),y=F(),n=f.useRef(null),[A,j]=f.useState([]);f.useEffect(()=>{L()}),f.useEffect(()=>{i==!0?y(V({AreaId:0,Taskname:"CREATEINITIALIZE"})):I("CompanyId",{},a.CompanyId,a.PlantId)},[]);const{isCreate:i,isView:o,createOrEdit:H,CompanyList:N,PlantList:J,loading:v,AreaList:z,Area:Z,error:_,StatusList:w,HdrTable:a}=P(r=>r.area),l=O({initialValues:{CompanyId:a!=null?a.CompanyId:"",PlantId:a!=null?a.PlantId:null,AreaName:a!=null?a.AreaName:"",Status:a!=null?a.Status:1},validationSchema:U,onSubmit:(r,{resetForm:h})=>{var u,x;let d={Area:{AreaId:a!=null?a.AreaId:0,AreaCode:a!=null?a.AreaCode:"",AreaName:r.AreaName,CompanyId:r.CompanyId,PlantId:r.PlantId,Status:r.Status,CreatedBy:a!=null?a.CreatedBy:localStorage.UserId,CreatedOn:a!=null?S(a.CreatedOn):S(new Date),ModifiedBy:a!=null?localStorage.UserId:null,ModifiedOn:a!=null?S(new Date):null}};if(a!=null){if(a.isCreate!=!1)try{y(k(d)).then(t=>{var s,m;(t.payload!=null||!t.payload)&&(t.payload.transtatus.result==!0?((s=n.current)==null||s.show({severity:"success",summary:"Success Message",detail:t.payload.transtatus.lstErrorItem[0].Message}),h(),setTimeout(()=>{g.push("/home/vArea")},800)):t.payload.transtatus.result==!1&&((m=n.current)==null||m.show({severity:"error",summary:"Error Message",detail:t.payload.transtatus.lstErrorItem[0].Message})))})}catch(c){(u=n.current)==null||u.show({severity:"warn",summary:"Error Message",detail:c})}}else try{y(R(d)).then(t=>{var s,m;(t.payload!=null||!t.payload)&&(t.payload.transtatus.result==!0?((s=n.current)==null||s.show({severity:"success",summary:"Success Message",detail:t.payload.transtatus.lstErrorItem[0].Message}),h()):t.payload.transtatus.result==!1&&((m=n.current)==null||m.show({severity:"warn",summary:"Error Message",detail:t.payload.transtatus.lstErrorItem[0].Message})))}).catch(t=>{var s;(s=n.current)==null||s.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(t.payload)})})}catch(c){(x=n.current)==null||x.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(c.payload)})}}}),E=()=>{l.resetForm(),j([])},C=(r,h,d)=>{l.setFieldValue(r,d)},I=(r,h,d,u)=>{l.setFieldValue(r,d),l.setFieldValue("PlantId",u||null);var c=y(B({CompanyId:d}));c.then(t=>{var s;t.payload.transtatus.result?j(t.payload.PlantList):(s=n.current)==null||s.show({severity:"error",detail:"Error",summary:t.payload.transtatus.lstErrorItem[0].Message})}).catch(t=>{var s;(s=n.current)==null||s.show({severity:"error",detail:"Error",summary:t})})};return e.jsxs(e.Fragment,{children:[e.jsx(q,{initialValues:l.initialValues,validationSchema:l.validationSchema,onSubmit:l.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Area"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(b,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",disabled:!!o,type:"submit",onClick:()=>l.handleSubmit()}),e.jsx(b,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(o||i==!1),onClick:()=>E()})]}),e.jsx(b,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{g.push("/home/vArea")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:v?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-12 md:col-9",children:e.jsxs("div",{className:"grid",children:[e.jsx(p,{type:"select",name:"CompanyId",label:"Company",options:N,show:!0,required:!0,disable:o||!i,optionLabel:"CompanyName",optionValue:"CompanyId",handleSelect:I,formik:l,fldStyle:"col-12 md:col-4",showFilter:!0}),e.jsx(p,{type:"select",name:"PlantId",label:"Plant",options:A,show:!0,required:!0,disable:o||!i,optionLabel:"PlantName",optionValue:"PlantId",handleSelect:C,formik:l,fldStyle:"col-12 md:col-4"}),e.jsx(p,{type:"text",name:"AreaCode",label:"Area Code",options:"",show:!1,required:!0,disable:!!(o||i==!1),optionLabel:"",optionValue:"",handleSelect:"",formik:l,fldStyle:"col-12 md:col-4"}),e.jsx(p,{type:"text",name:"AreaName",label:"Area Name",options:"",show:!0,required:!0,disable:!!o,optionLabel:"AreaName",optionValue:"AreaId",handleSelect:"",formik:l,fldStyle:"col-12 md:col-4",maxlength:90})]})}),e.jsx(p,{type:"select",name:"Status",label:"Status",options:w,show:!0,required:!0,disable:!!o||i==null||i==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:C,formik:l,fldStyle:"col-12 md:col-3"})]})})})})})})})]})})}),e.jsx(T,{toast:n})]})};export{W as default};
