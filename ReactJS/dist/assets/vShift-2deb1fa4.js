import{a as T,r as s,u as C,b as w,p as I,cm as j,cn as p,j as r,C as M,d as H,co as y,g as F,cp as O}from"./index-25a41ef1.js";import{P as B,A as _}from"./PageHeader-b76b68bd.js";import{p as W}from"./PermissionService-9ad252b6.js";import{e as b}from"./ExportService-4b3a6c99.js";import"./column.esm-11a46c7b.js";import"./index.esm-9a713e1a.js";import"./inputswitch.esm-a89edc74.js";import"./jspdf.es.min-40ee8370.js";const Q=()=>{const g=T(),n=s.useRef(null),[e,x]=s.useState(),[l,u]=s.useState([]),f=C(),{loading:v,ShiftList:E}=w(t=>t.shift);s.useEffect(()=>{I()}),s.useEffect(()=>{x(W({screenId:10}))},[]),s.useEffect(()=>{m()},[]);const m=()=>f(j({ShiftId:0,Taskname:"SearchInitialize"}));s.useEffect(()=>{e!=null&&e._View&&l.filter(t=>t.name=="view").length==0&&u([...l,{title:"View",name:"view",disabled:!1}]),e!=null&&e._Update&&l.filter(t=>t.name=="edit").length==0&&u([...l,{title:"Edit",name:"edit",disabled:!1}]),e!=null&&e._Delete&&l.filter(t=>t.name=="delete").length==0&&u([...l,{title:"Delete",name:"delete",disabled:!1}]),e!=null&&e._View&&(e!=null&&e._Update)&&(e!=null&&e._Delete)&&S({...c,tableAction:!0})},[e,l]),s.useEffect(()=>{e!=null&&e._Add&&!c.pageHeader.pageActions[0].create&&S(t=>{const d={...t.pageHeader,pageActions:t.pageHeader.pageActions.map(o=>({...o,create:!!(e!=null&&e._Add)}))};return{...t,pageHeader:d}})},[e]),s.useEffect(()=>{S({...c,tableActions:l})},[l]);const[c,S]=s.useState({pageTitle:"Shift",pageHeader:{pageActions:[{create:!1,clear:!1,save:!1,createQuery:"/home/cShift",createDispatch:()=>f(p({data:null,isView:!1,isCreate:!0}))}]},tableCheckSelection:!1,tableAction:!0,tableActionStyle:{width:"10em",textAlign:"center"},tableRows:10,tableRowsOptions:[5,10,25],tablePagination:!0,tableActions:l,tableColumns:[{title:"Shift Name",name:"ShiftName",sort:!0,avatar:!1,badge:!1,colStyle:{}},{title:"From Time",name:"ShiftFromTime",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"To Time",name:"ShiftToTime",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Shift Hours",name:"ShiftHours",sort:!0,avatar:!1,badge:!1,colStyle:{}},{title:"Created By",name:"CreatedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Created On",name:"CreatedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Modified By",name:"ModifiedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Modified On",name:"ModifiedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"6rem"}},{title:"Status",name:"StatusName",sort:!0,avatar:!1,badge:!0,colStyle:{minWidth:"2rem",textAlign:"center"}}],tableExport:t=>{m().then(o=>{A(o.payload.ShiftList).then(a=>{t==="pdf"?b.Export("Shift",a,"pdf"):t==="excel"&&b.Export("Shift",a,"excel")}).catch(a=>{console.error(a.message)})})}}),A=t=>new Promise((d,o)=>{let a=[];t.length>0?(t.forEach(i=>{let h={"Shift Name":i.ShiftName,"From Time":i.ShiftFromTime,"To Time":i.ShiftToTime,"Shift Hours":i.ShiftHours,"Created By":i.CreatedByName,"Created On":i.CreatedOn,"Modified By":i.ModifiedByName,"Modified On":i.ModifiedOn,Status:i.StatusName};a.push(h)}),d(a)):o(new Error("No data available for export."))}),N={view:t=>{const d={ShiftId:t.data.ShiftId,Taskname:"CreateInitialize"};f(y(d)).then(a=>{a.payload.transtatus.result==!0&&g.push("/home/cShift")}).catch(a=>{}),f(p(t))},edit:t=>{const d={ShiftId:t.data.ShiftId,Taskname:"CreateInitialize"};f(y(d)).then(a=>{a.payload.transtatus.result==!0&&g.push("/home/cShift")}).catch(a=>{}),f(p(t))},delete:t=>{F(`Are you sure you want to inactive this ${t.data.ShiftName}?`,"Confirmation",()=>{let d={ShiftId:t.data.ShiftId};f(O(d)).then(a=>{var i,h;a.payload.transtatus.result==!0?((i=n.current)==null||i.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),m()):a.payload.transtatus.result==!1&&((h=n.current)==null||h.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message}))}).catch(a=>{var i;(i=n.current)==null||i.show({severity:"error",summary:"Error Message",detail:JSON.stringify(a)})})},()=>{})}};return s.useEffect(()=>{}),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"inner-page-container",children:[r.jsx(B,{pageTitle:c.pageTitle,pageConfig:c}),r.jsx("div",{className:"form-container scroll-y",children:r.jsx("div",{className:"white",children:r.jsx("div",{className:"widget-body",children:r.jsx("div",{className:"card",children:r.jsx(_,{handleActions:N,data:E,loading:v,pageConfig:c,screenPermissions:e})})})})})]})}),r.jsx(M,{}),r.jsx(H,{toast:n})]})};export{Q as default};
