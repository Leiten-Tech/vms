import{a as M,u as F,r as h,p as V,o as N,b as L,c as k,t as C,v as A,w as R,j as e,F as T,B as S,n as m,A as D,d as B}from"./index-25a41ef1.js";import{C as q}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const G=()=>{const x=M(),y=F(),l=h.useRef(null),[j,n]=h.useState(!1);h.useEffect(()=>{V()}),h.useEffect(()=>{if(t!=null){if(u==!1){const r={Countryid:t.CountryId,Taskname:"CREATEINITIALIZE"};y(N(r))}}else y(N({Countryid:0,Taskname:"CREATEINITIALIZE"}))},[]);const{isCreate:u,isView:i,createEditData:t,loading:v,error:O,StatusList:w,CountryList:H,Country:J,HdrTable:U}=L(r=>r.country),s=k({initialValues:{CountryCode:t!=null?t.CountryCode:"",CountryName:t!=null?t.CountryName:"",CountryShortform:t!=null?t.CountryShortForm:"",Nationality:t!=null?t.Nationality:"",Status:t!=null?t.Status:1},validationSchema:q,onSubmit:(r,{resetForm:f})=>{var b,g;n(!0);let p={CountryMaster:{CountryId:t!=null?t.CountryId:0,CountryName:r.CountryName,CountryCode:t!=null?t.CountryCode:"",CountryShortForm:r.CountryShortform,Nationality:r.Nationality,Status:r.Status,CreatedBy:t!=null?t.CreatedBy:localStorage.UserId,CreatedOn:t!=null?C(t.CreatedOn):C(new Date),ModifiedBy:t!=null?localStorage.UserId:null,ModifiedOn:t!=null?C(new Date):null}};if(t!=null){if(t.isCreate!=!1)try{y(A(p)).then(a=>{var o,c;if(n(!1),a.payload!=null||!a.payload){if(a.payload.transtatus.result==!0)n(!1),(o=l.current)==null||o.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),f(),setTimeout(()=>{x.push("/home/vCountry")},800);else if(a.payload.transtatus.result==!1){n(!1),(c=l.current)==null||c.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),n(!1);return}}})}catch(d){(b=l.current)==null||b.show({severity:"warn",summary:"Error Message",detail:d})}}else try{y(R(p)).then(a=>{var o,c;if(a.payload!=null||!a.payload){if(a.payload.transtatus.result==!0)(o=l.current)==null||o.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),n(!1),f();else if(a.payload.transtatus.result==!1){(c=l.current)==null||c.show({severity:"warn",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),n(!1);return}}}).catch(a=>{var o;(o=l.current)==null||o.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(a.payload)})})}catch(d){(g=l.current)==null||g.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(d.payload)})}}}),E=()=>{s.resetForm()},I=(r,f,p)=>{s.setFieldValue(r,p)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{initialValues:s.initialValues,validationSchema:s.validationSchema,onSubmit:s.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Country"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(S,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",type:"submit",disabled:!!(i||j),onClick:()=>s.handleSubmit()}),e.jsx(S,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(i||u==!1),onClick:()=>E()})]}),e.jsx(S,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{x.push("/home/vCountry")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:v?e.jsx(D,{}):e.jsxs(e.Fragment,{children:[e.jsx(m,{type:"text",name:"CountryCode",label:"Country Code",options:"",show:u==!1,required:!0,disable:!!(i||u==!1),optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(m,{type:"text",name:"CountryName",label:"Country Name",options:"",show:!0,required:!0,disable:!!i,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(m,{type:"text",name:"CountryShortform",label:"Country Shortform",options:"",show:!0,required:!0,disable:!!i,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(m,{type:"text",name:"Nationality",label:"Nationality",options:"",show:!0,required:!0,disable:!!i,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:s}),e.jsx(m,{type:"select",name:"Status",label:"Status",options:w,show:!0,required:!0,disable:!!i||u==null||u==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:I,fldStyle:"col-12 md:col-3",formik:s})]})})})})})})})]})})}),e.jsx(B,{toast:l})]})};export{G as default};
