import{a as E,u as w,r as h,p as M,$ as I,b as V,c as D,t as f,a1 as F,a2 as k,j as e,F as L,B as g,n as y,A,d as T}from"./index-25a41ef1.js";import{R as B}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const $=()=>{const x=E(),u=w(),r=h.useRef(null);h.useEffect(()=>{M()}),h.useState([{name:"IsDesignation",key:!0}]),h.useEffect(()=>{if(a!=null){if(o==!1){const s={RoleId:a.RoleId,Taskname:"CREATEINITIALIZE"};u(I(s))}}else u(I({RoleId:0,Taskname:"CREATEINITIALIZE"}))},[]);const{isCreate:o,isView:n,createEditData:O,createOrEdit:P,loading:j,error:q,RoleCreateRes:U,RoleUpdateRes:H,StatusList:v,RoleList:J,HdrTable:a}=V(s=>s.role),l=D({initialValues:{RoleId:a!=null?a.RoleId:0,RoleCode:a!=null?a.RoleCode:"",RoleName:a!=null?a.RoleName:"",CompanyId:localStorage.CompanyId,PlantId:localStorage.PlantId,Status:a!=null?a.Status:1,CreatedBy:a!=null?a.CreatedBy:localStorage.UserId,CreatedOn:a!=null?f(a.CreatedOn):f(new Date),ModifiedBy:a!=null?localStorage.UserId:null,ModifiedOn:a!=null?f(new Date):null,IsDesignation:a!=null?a.IsDesignation:!0},validationSchema:B,onSubmit:(s,{resetForm:m})=>{var R,b;let p={Role:s};if(a!=null){if(a.isCreate!=!1)try{u(F(p)).then(t=>{var i,c;(t.payload!=null||!t.payload)&&(t.payload.transtatus.result==!0?((i=r.current)==null||i.show({severity:"success",summary:"Success Message",detail:t.payload.transtatus.lstErrorItem[0].Message}),m(),setTimeout(()=>{x.push("/home/vRole")},800)):t.payload.transtatus.result==!1&&((c=r.current)==null||c.show({severity:"error",summary:"Error Message",detail:t.payload.transtatus.lstErrorItem[0].Message})))})}catch(d){(R=r.current)==null||R.show({severity:"warn",summary:"Error Message",detail:d})}}else try{u(k(p)).then(t=>{var i,c;(t.payload!=null||!t.payload)&&(t.payload.transtatus.result==!0?((i=r.current)==null||i.show({severity:"success",summary:"Success Message",detail:t.payload.transtatus.lstErrorItem[0].Message}),m()):t.payload.transtatus.result==!1&&((c=r.current)==null||c.show({severity:"warn",summary:"Error Message",detail:t.payload.transtatus.lstErrorItem[0].Message})))}).catch(t=>{var i;(i=r.current)==null||i.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(t.payload)})})}catch(d){(b=r.current)==null||b.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(d.payload)})}}}),N=()=>{l.resetForm()},C=(s,m,p)=>{l.setFieldValue(s,p)},S=s=>{s.target.value.length>=10&&s.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsx(L,{initialValues:l.initialValues,validationSchema:l.validationSchema,onSubmit:l.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Role"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(g,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",disabled:!!n,type:"submit",onClick:()=>l.handleSubmit()}),e.jsx(g,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",disabled:!!(n||o==!1),className:"text-center",onClick:()=>N()})]}),e.jsx(g,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{x.push("/home/vRole")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:j?e.jsx(A,{}):e.jsxs(e.Fragment,{children:[e.jsx(y,{type:"text",name:"RoleCode",label:"Role Code",options:"",show:o==null||o==!1,required:!0,disable:!!(n||o==!1||o!=null),optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:S,fldStyle:"col-12 md:col-3",formik:l}),e.jsx(y,{type:"text",name:"RoleName",label:"Role Name",show:!0,required:!0,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",handleKeyPress:S,fldStyle:"col-12 md:col-3",formik:l,maxlength:"30"}),e.jsx(y,{type:"select",name:"Status",label:"Status",options:v,show:!0,required:!0,disable:!!n||o==null||o==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:C,formik:l,fldStyle:"col-12 md:col-3"}),e.jsx(y,{type:"checkbox",name:"IsDesignation",label:"Is Designation",options:"",show:!1,required:!0,disable:!!n,optionLabel:"",optionValue:"",fldStyle:"col-12 md:col-4",formik:l})]})})})})})})})]})})}),e.jsx(T,{toast:r})]})};export{$ as default};
