import{r as s,a as A,p as w,u as j,b as y,f as M,e as g,j as l,C as O,d as B,g as H,h as W}from"./index-25a41ef1.js";import{P as _,A as D}from"./PageHeader-b76b68bd.js";import{e as b}from"./ExportService-4b3a6c99.js";import{p as R}from"./PermissionService-9ad252b6.js";import"./column.esm-11a46c7b.js";import"./index.esm-9a713e1a.js";import"./inputswitch.esm-a89edc74.js";import"./jspdf.es.min-40ee8370.js";const $=V=>{s.useState(null);const h=A(),[e,x]=s.useState(),u=s.useRef();s.useEffect(()=>{w()}),s.useEffect(()=>{x(R({screenId:5}))},[]);const d=j();let v=y(t=>t.states.StateList);const C=y(t=>t.states.loading);s.useEffect(()=>{m()},[d]);const m=()=>d(M({Stateid:0}));s.useState(null);const[i,p]=s.useState([]);s.useEffect(()=>{e!=null&&e._View&&i.filter(t=>t.name=="view").length==0&&p([...i,{title:"View",name:"view",disabled:!1}]),e!=null&&e._Update&&i.filter(t=>t.name=="edit").length==0&&p([...i,{title:"Edit",name:"edit",disabled:!1}]),e!=null&&e._Delete&&i.filter(t=>t.name=="delete").length==0&&p([...i,{title:"Delete",name:"delete",disabled:!1}]),e!=null&&e._View&&(e!=null&&e._Update)&&(e!=null&&e._Delete)&&S({...o,tableAction:!0})},[e,i]),s.useEffect(()=>{e!=null&&e._Add&&!o.pageHeader.pageActions[0].create&&S(t=>{const n={...t.pageHeader,pageActions:t.pageHeader.pageActions.map(c=>({...c,create:!!(e!=null&&e._Add)}))};return{...t,pageHeader:n}})},[e]),s.useEffect(()=>{}),s.useEffect(()=>{S({...o,tableActions:i})},[i]);const[o,S]=s.useState({pageTitle:"State",pageHeader:{pageActions:[{create:!1,clear:!1,save:!1,createQuery:"/home/cState",createDispatch:()=>d(g({data:null,isView:!1,isCreate:!0}))}]},tableCheckSelection:!1,tableAction:!0,tableActionStyle:{maxWidth:"10rem",textAlign:"center",justifySelf:"center"},tableRows:10,tableRowsOptions:[5,10,25],tablePagination:!0,tableActions:i,tableColumns:[{title:"Country",name:"CountryName",sort:!0,avatar:!1,badge:!1,colStyle:{}},{title:"State Code",name:"StateCode",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"8rem"}},{title:"State Name",name:"StateName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"8rem"}},{title:"Created By",name:"CreatedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"5rem"}},{title:"Created On",name:"CreatedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"5rem"}},{title:"Modified By",name:"ModifiedByName",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"5rem"}},{title:"Modified On",name:"ModifiedOn",sort:!0,avatar:!0,badge:!1,colStyle:{minWidth:"5rem"}},{title:"Status",name:"StatusName",sort:!0,avatar:!1,badge:!0,colStyle:{minWidth:"2rem",textAlign:"center"}}],tableExport:t=>{m().then(c=>{E(c.payload.StateList).then(a=>{t==="pdf"?b.Export("State",a,"pdf"):t==="excel"&&b.Export("State",a,"excel")}).catch(a=>{console.error(a.message)})})}}),E=t=>new Promise((n,c)=>{let a=[];t.length>0?(t.forEach(r=>{let f={Country:r.CountryName,"State Code":r.StateCode,"State Name":r.StateName,"Created By":r.CreatedByName,"Created On":r.CreatedOn,"Modified By":r.ModifiedByName,"Modified On":r.ModifiedOn,Status:r.StatusName};a.push(f)}),n(a)):c(new Error("No data available for export."))}),N={view:t=>{h.push("/home/cState"),d(g(t))},edit:t=>{h.push("/home/cState"),d(g(t))},delete:t=>{H(`Are you sure you want to inactive this ${t.data.StateName}?`,"Confirmation",()=>{let n={Stateid:t.data.StateId};d(W(n)).then(a=>{var r,f;a.payload.transtatus.result==!0?((r=u.current)==null||r.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),m()):a.payload.transtatus.result==!1&&((f=u.current)==null||f.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message}))}).catch(a=>{var r;(r=u.current)==null||r.show({severity:"error",summary:"Error Message",detail:JSON.stringify(a)})})},()=>{})}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"page-container",children:l.jsxs("div",{className:"inner-page-container",children:[l.jsx(_,{pageTitle:o.pageTitle,pageConfig:o}),l.jsx("div",{className:"form-container scroll-y",children:l.jsx("div",{className:"white",children:l.jsx("div",{className:"widget-body",children:l.jsx("div",{className:"card",children:l.jsx(D,{handleActions:N,data:v,loading:C,pageConfig:o,screenPermissions:e})})})})})]})}),l.jsx(O,{}),l.jsx(B,{toast:u})]})};export{$ as default};
