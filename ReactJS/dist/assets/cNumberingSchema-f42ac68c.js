import{a as D,u as M,r as S,p as L,a5 as N,b as V,c as C,a7 as k,a8 as A,j as e,F as P,B as f,n as o,A as R,d as T}from"./index-25a41ef1.js";import{N as q}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const G=()=>{const y=D(),m=M(),l=S.useRef(null);S.useEffect(()=>{L()}),S.useEffect(()=>{if(t!=null){if(d==!1){const s={NumberingSchemaId:t.NumberingSchemaId,Taskname:"CREATEINITIALIZE"};m(N(s))}}else m(N({NumberingSchemaId:0,Taskname:"CREATEINITIALIZE"}))},[]);const{createTranstatus:B,numberingSchemaUpdateList:O,createOrEdit:J,DocumentList:j,error:Z,SymbolList:E,DateFormatList:I,StatusList:F,NumberingSchema:t,loading:v,isView:i,isCreate:d}=V(s=>s.numberingSchema),r=C({initialValues:{Document:t!=null?t.DocumentId:"",EnterPrefix:t!=null?t.Prefix:"",SymbolFields:t!=null?t.SymbolId:"",DateFormat:t!=null?t.DateFormat:"",Entersuffix:t!=null?t.Suffix:"",Status:t!=null?t.Status:1},validationSchema:q,onSubmit:(s,{resetForm:b})=>{var x,g;let p={NumberingSchema:{NumberingSchemaId:t!=null?t.NumberingSchemaId:0,PlantId:1,DocumentId:s.Document,Prefix:s.EnterPrefix,SymbolId:s.SymbolFields,Suffix:s.Entersuffix,Createdby:1,Createdon:new Date,Modifiedby:2,Modifiedon:new Date,Status:s.Status,DateFormat:s.DateFormat}};if(t!=null){if(t.isCreate!=!1)try{m(k(p)).then(a=>{var n,c;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((n=l.current)==null||n.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),b(),setTimeout(()=>{y.push("/home/vNumberingSchema")},800)):a.payload.transtatus.result==!1&&((c=l.current)==null||c.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))})}catch(u){(x=l.current)==null||x.show({severity:"warn",summary:"Error Message",detail:u})}}else try{m(A(p)).then(a=>{var n,c;(a.payload!=null||!a.payload)&&(a.payload.transtatus.result==!0?((n=l.current)==null||n.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),b()):a.payload.transtatus.result==!1&&((c=l.current)==null||c.show({severity:"warn",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message})))}).catch(a=>{var n;(n=l.current)==null||n.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(a.payload)})})}catch(u){(g=l.current)==null||g.show({severity:"warn",summary:"Error Message",detail:JSON.stringify(u.payload)})}}}),h=(s,b,p)=>{r.setFieldValue(s,p)},w=()=>{r.resetForm()};return e.jsxs(e.Fragment,{children:[e.jsx(P,{initialValues:r.initialValues,validationSchema:r.validationSchema,onSubmit:r.handleSubmit,children:e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"inner-page-container",children:[e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"grid grid-nogutter",children:[e.jsx("div",{className:"md:col-6",children:e.jsx("h1",{children:"Numbering Schema"})}),e.jsx("div",{className:"md:col-6 text-right",children:e.jsxs("div",{className:"action-btn",children:[e.jsxs(e.Fragment,{children:[e.jsx(f,{label:"",title:"Save",icon:"pi pi-save",disabled:!!i,className:"text-center",type:"submit",onClick:()=>r.handleSubmit()}),e.jsx(f,{label:"",severity:"danger",icon:"pi pi-trash",disabled:!!(i||d==!1),title:"Clear",className:"text-center",onClick:()=>w()})]}),e.jsx(f,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{y.push("/home/vNumberingSchema")}})]})})]})}),e.jsx("div",{className:"form-container scroll-y",children:e.jsx("form",{children:e.jsx("div",{className:"white",children:e.jsx("div",{className:"widget-body",children:e.jsx("div",{className:"normal-table",children:e.jsx("div",{className:"grid",children:v?e.jsx(R,{}):e.jsxs(e.Fragment,{children:[e.jsx(o,{type:"select",name:"Document",label:"Document",options:j,show:!0,required:!0,disable:!!i,optionLabel:"FunctionName",optionValue:"FunctionId",handleSelect:h,fldStyle:"col-12 md:col-3",formik:r}),e.jsx(o,{type:"text",name:"EnterPrefix",label:"Enter Prefix",options:"",show:!0,required:!0,disable:!!i,optionLabel:"",optionValue:"",handleSelect:"",formik:r,fldStyle:"col-12 md:col-3",maxlength:8}),e.jsx(o,{type:"select",name:"SymbolFields",label:"Symbol Fields",options:E,show:!0,required:!0,disable:!!i,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:h,formik:r,fldStyle:"col-12 md:col-3"}),e.jsx(o,{type:"select",name:"DateFormat",label:"Date Format",options:I,show:!0,required:!0,disable:!!i,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:h,fldStyle:"col-12 md:col-3",formik:r}),e.jsx(o,{type:"text",name:"Entersuffix",label:"Enter suffix",options:"",show:!0,required:!0,disable:!!i,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:r,maxlength:8}),e.jsx(o,{type:"select",name:"Status",label:"Status",options:F,show:!0,required:!0,disable:!!i||d==null||d==!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:h,fldStyle:"col-12 md:col-3",formik:r})]})})})})})})})]})})}),e.jsx(T,{toast:l})]})};export{G as default};
