import{a as sa,j as t,A as la,F as oa,n as f,I as xs,r as s,u as ra,p as li,B as We,L as gt,b as ea,c as ai,dh as si,az as Cs,a9 as Es,di as Ms,dj as Ts,dk as ws,d as Fs,cV as Ps,t as ta,dl as ia,dm as js,dn as vs,dp as ks,dq as Os,dr as Us,ds as Bs,dt as Rs,du as As}from"./index-25a41ef1.js";import{V as qs,q as Ws,g as Hs}from"./Master-b11b8a2f.js";import{D as Gs,C as aa}from"./column.esm-11a46c7b.js";import{P as Js}from"./PhotoCapture-c5d70e6b.js";import{F as _s}from"./fileupload.esm-b904f07b.js";import{V as Ks}from"./VisitorManagement-638cb0f9.js";import{I as zs}from"./inputswitch.esm-a89edc74.js";import{A as $s}from"./vms-banner-01b81de4.js";import"./index.esm-21a4a4d3.js";import"./index.esm-9a713e1a.js";const Qs=P=>{const{visitorEntryBelongingDetailForm:C,formik:w,VisitorEntryBelongingDetailList:p,TableHeader:j,filters:me,isView:U,setVisitorEntryBelongingDetailList:g,toast:A,isCreate:ue}=P,B=(D,S,q)=>{const T=[...p];T[q.rowIndex][q.field]=D.target.value,g(T)},K=(D,S)=>t.jsx(xs,{className:"w-full",value:D[S.field],onChange:q=>{B(q,D,S)},maxLength:50,disabled:U||!ue});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"sub-title",children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"col-12",children:t.jsx("h2",{children:"Belonging Details"})})})}),t.jsx("div",{className:"normal-table",children:t.jsxs(Gs,{value:p,showGridlines:!0,filterDisplay:"menu",globalFilterFields:["VisitorName","DepartMentName","Dob","MobileNo","MailId","IdCardTypeName","IdCardNo","StatusName"],emptyMessage:"No Data found.",children:[t.jsx(aa,{field:"DeviceName",header:"Property Name",style:{width:"40%"},body:(D,S)=>K(D,S)}),t.jsx(aa,{field:"DeviceNo",header:"Serial No",style:{width:"25%"},body:(D,S)=>K(D,S)})]})})]})},Ys=P=>{const{isView:C,isCreate:w,VisitorTypeList:p,handleSelect:j,handleOnChange:me,TitleList:U,formik:g,CountryList:A,Onchangecountry:ue,StateList:B,Onchangestate:K,CityList:D,IdCardList:S,StatusList:q,onUpload:T,itemTemplate:z,imageUrl:_,values:he,visitorForm:Ce,visitorRef:F,onSubmit:Ee,onChangeVisitorType:W,tempStateList:He,tempCityList:$,handleCloseImage:Ge,handleChange:Q,profUploadRef:Je,VisitorhandleHyperlink:te,onUploadDocumentVisitor:Me,deleteDocumentsVisitor:ie,documentVisitorUploadRef:Te,documentUrlVisitor:fe,saveVisitorDetails:Y,cameraOff:b,setCameraOff:Z,phonenumber:pe}=P;return t.jsx(oa,{initialValues:Ce,validationSchema:qs,onSubmit:Ee,ref:F,children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"grid",children:[t.jsx("div",{className:"col-12 md:col-8",children:t.jsxs("div",{className:"grid",children:[t.jsx(f,{type:"text",name:"VisitorCode",label:"Visitor Code ",options:"",show:!1,required:!0,disable:!!(C||w==!1),optionLabel:"",optionValue:"",handleSelect:"",onKeyPress:()=>{},fldStyle:"col-12 md:col-4",formik:g}),t.jsx(f,{type:"text_title",name:"TitleId",label:"Name ",options:U,show:!0,required:!0,disable:!!C,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:j,handleOnChange:me,titleInputName:"FirstName",fldStyle:"col-12 md:col-6",formik:g,maxlength:50}),t.jsx(f,{type:"Calendar",name:"Dob",label:"Date of Birth",options:"",show:!1,required:!0,disable:!!C,optionLabel:"",optionValue:"",handleChange:Q,fldStyle:"col-12 md:col-6",formik:g,maxDate:new Date}),t.jsx(f,{type:"text",name:"MailId",label:"Mail ID ",options:"",show:!0,required:!0,disable:!!C,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-6",formik:g}),t.jsx(f,{type:"text_title",name:"MobileNo",label:"Mobile No ",options:pe,show:!0,required:!0,disable:!!C,optionLabel:"CountryCode",optionValue:"CountryCode",handleSelect:j,optionDisable:!0,fldStyle:"col-12 md:col-6",formik:g,keyfilter:"int",maxlength:10,minLength:10,titleInputName:"CountryCode"}),t.jsx(f,{type:"text",name:"VisitorCompany",label:"Visitor Company ",options:"",show:!0,required:!1,disable:!!C,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-6",formik:g,maxlength:100}),t.jsx(f,{type:"text",name:"TagNo",label:"Tag No ",options:"",show:!0,required:!1,disable:!!C,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-6",formik:g}),t.jsx(f,{type:"textarea",name:"Address",label:"Address",options:"",show:!1,required:!1,disable:!!C,optionLabel:"",optionValue:"",handleSelect:"",formik:g,fldStyle:"col-12 md:col-12",maxlength:"500",style:{maxHeight:"100px",overflowY:"auto"}})]})}),t.jsx("div",{className:"col-12 md:col-4",children:t.jsx(Js,{onUpload:T,ImageUrl:_,isView:C||!w,cameraOff:b,setCameraOff:Z,fldStyle:"col-12 text-center"})})]})})})})},Zs=P=>{const{setIsVisMaster:C,isVisMaster:w,visitorEntryFormik:p,VisitorNameList:j,handleVisitorSelected:me,isViewVM:U,isCreateVM:g,VisitorTypeListVM:A,handleSelectVM:ue,TitleListVM:B,CountryListVM:K,OnchangecountryVM:D,StateListVM:S,OnchangestateVM:q,CityListVM:T,IdCardListVM:z,StatusListVM:_,onUploadVM:he,itemTemplateVM:Ce,imageUrlVM:F,handleOnChangeVM:Ee,visitorFormVM:W,visitorRefVM:He,formikVM:$,onChangeVisitorTypeVM:Ge,tempStateListVM:Q,tempCityListVM:Je,handleCloseImageVM:te,handleChangeVM:Me,profUploadRef:ie,VisitorhandleHyperlinkVM:Te,onUploadDocumentVisitorVM:fe,deleteDocumentsVisitorVM:Y,documentUrlVisitorVM:b,documentVisitorUploadRefVM:Z,loadingVM:pe,toast:ae,VisitorEntryBelongingDetailList:De,setVisitorEntryBelongingDetailList:_e,IsBelongingDetailsShow:y,pageType:ye,cameraOff:Ie,setCameraOff:Ke,phonenumber:X}=P;return sa(),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"widget-hdr",children:t.jsx("div",{className:"sub-title",children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"col-12",children:t.jsx("h2",{children:`${ye?"Contractor":"Visitor"} Information`})})})})}),t.jsx("div",{className:"widget-body",children:t.jsx("div",{className:"normal-table",children:pe?t.jsx(la,{}):t.jsxs(t.Fragment,{children:[t.jsx(Ys,{isView:U,isCreate:g,VisitorTypeList:A,handleSelect:ue,TitleList:B,CountryList:K,Onchangecountry:D,StateList:S,Onchangestate:q,CityList:T,IdCardList:z,StatusList:_,onUpload:he,itemTemplate:Ce,imageUrl:F,handleOnChange:Ee,visitorForm:W,visitorRef:He,formik:$,onChangeVisitorType:Ge,tempStateList:Q,tempCityList:Je,handleCloseImage:te,handleChange:Me,profUploadRef:ie,VisitorhandleHyperlink:Te,onUploadDocumentVisitor:fe,deleteDocumentsVisitor:Y,documentUrlVisitor:b,documentVisitorUploadRef:Z,toast:ae,phonenumber:X}),t.jsx("div",{className:U?"p-disabled":"",children:t.jsx(Qs,{VisitorEntryBelongingDetailList:De,setVisitorEntryBelongingDetailList:_e,isView:U,isCreate:g,toast:ae,IsBelongingDetailsShow:y})})]})})})]})},Xs=P=>{const{visitorEntryForm:C,VisitorEntryValidationSchema:w,formik:p,pageType:j,onUpload:me,itemTemplate:U,isView:g,imageUrl:A,IsPreBookingList:ue,VisitorTypeList:B,onChangeVisitorType:K,isCreate:D,handleSelect:S,autoCompleteRef:q,OnSelectVisitorCode:T,onChangeMatType:z,filteritemType:_,VisitorNameList:he,onChangeVisitor:Ce,handleIsPreBook:F,VECodeDisable:Ee,EmployeeList:W,OnchangePlantList:He,ProofList:$,onClickIsAppointmentBooking:Ge,ValidFromDisable:Q,ValidToDisable:Je,onChageFromDate:te,onChageToDate:Me,TominDate:ie,CheckboxDisable:Te,onClickIsExistingVehicle:fe,HideVehicleDD:Y,HideDriverDD:b,onUploadDocument:Z,documentUrl:pe,onClickIsExistingDriver:ae,OnChangePartyTypes:De,PartyTypeList:_e,PartyNameList:y,AreaList:ye,RouteList:Ie,DriverList:Ke,VehicleList:X,IsDeliveryChallan:ze,IsInvoiceBased:$e,IsVehicleTripBased:we,IsPartyDisable:Qe,IsVehicleDetailsDisable:ge,ShowVisitorContranctor:H,IsMaterialDetailsShow:rt,InvoiceNumberDisable:Se,DcNumberDisable:Fe,PoNumberDisable:be,ContainerNumberDisable:Pe,StatusList:je,OnChangeVehicle:ve,deleteDocuments:se,handleHyperlink:Ye,cameraOff:Ne,setCameraOff:Ze,handleChange:le,handleRouteSelect:oe,initFldDisable:ee,PurposeList:Xe,handlePoVSelect:et,selectedPlant:St,PlantList:tt,handlePlantSelect:ke,handleDepartmentSelect:it,PlantWiseDepartmentList:Oe,plantDisable:Ue}=P,Be={icon:"las la-upload",iconOnly:!0};return t.jsx(oa,{initialValues:C,validationSchema:w,onSubmit:p.handleSubmit,children:t.jsxs(t.Fragment,{children:[t.jsx(t.Fragment,{children:t.jsx("div",{className:"normal-table",children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"grid",children:[t.jsx(f,{type:"radiobox",name:"IsPreBooking",label:"Is Pre Booking ?",options:ue,show:!1,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",handleChange:F,formik:p,fldStyle:"col-12 md:col-4"}),t.jsx(f,{type:"text",name:"VisitorEntryCode",label:"Visitor Entry Code ",options:"",show:!1,required:!1,disable:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"select",name:"PlantId",label:"Plant Name",options:tt,show:!0,required:!0,disable:!!(g||Ue),optionLabel:"PlantName",optionValue:"PlantId",handleSelect:ke,formik:p,fldStyle:"col-12 md:col-4"}),t.jsx(f,{type:"select",name:"DeptId",label:"Department Name",options:Oe,show:!0,required:!0,disable:!!g,optionLabel:"DepartmentName",optionValue:"DepartmentId",handleSelect:it,formik:p,fldStyle:"col-12 md:col-4"}),t.jsx(f,{type:"select",name:"VisitorTypeId",label:"Visitor Type ",options:B,show:!1,required:!1,disable:g||!D||ee,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:K,fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"text",name:"PersonName",label:"Visitor Name ",options:"",show:!H,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:100}),t.jsx(f,{type:"Calendar",name:"VisitorEntryDate",label:"Visitor Entry Date",options:"",show:!1,required:!1,disable:!0,optionLabel:"",optionValue:"",handleChange:le,fldStyle:"col-12 md:col-4",formik:p,maxDate:new Date}),t.jsx(f,{type:"select",name:"VisitedEmployeeId",label:"Person to Visit",options:W,show:!0,required:!0,optionLabel:"UserName",optionValue:"UserId",handleSelect:S,fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"text",name:"MobileNo",label:"Mobile No ",options:"",show:!H,required:!1,disable:D?H:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,keyfilter:"int",maxlength:15,minLength:9}),t.jsx(f,{type:"select",name:"IdProofType",label:"ID Proof Type ",options:$,show:!H,required:!1,disable:D?H:!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:S,fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"text",name:"IdProofNo",label:"ID Proof No ",options:"",show:!H,required:!1,disable:D?H:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:"20"}),t.jsx(f,{type:"multi_select",name:"AreaToVisit",label:"Area To Visit ",options:ye,show:!0,required:!1,disable:g||!D,optionLabel:"AreaName",optionValue:"AreaId",handleSelect:et,fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"Calendar",name:"ValidFrom",label:j?"Valid From":"Appointment Date",options:"",show:!0,required:!0,disable:!1,optionLabel:"",optionValue:"",handleChange:te,fldStyle:"col-12 md:col-4",formik:p,minDate:new Date,showTime:!0}),t.jsx(f,{type:"Calendar",name:"ValidTo",label:"Valid To",options:"",show:j,required:!1,disable:!1,optionLabel:"",optionValue:"",handleChange:Me,fldStyle:"col-12 md:col-4",formik:p,minDate:ie??new Date,showTime:!0}),t.jsx(f,{type:"text",name:"DcNumber",label:"Dc Number ",options:"",show:!Fe,required:!1,disable:D?Fe:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:"20"}),t.jsx(f,{type:"text",name:"InvoiceNumber",label:"Invoice Number ",options:"",show:!Se,required:!1,disable:D?Se:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:"20"}),t.jsx(f,{type:"text",name:"PoNumber",label:"Po Number ",options:"",show:!be,required:!1,disable:D?be:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:"20"}),t.jsx(f,{type:"text",name:"ContainerNumber",label:"Container Number ",options:"",show:!Pe,required:!1,disable:D?Pe:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p,maxlength:"20"}),t.jsx(f,{type:"select",name:"Status",label:"Status ",options:je,show:!1,required:!1,disable:!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:S,fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"",name:"",label:"",options:"",show:p.values.VisitorTypeId==66,required:!1,disable:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-4",formik:p}),t.jsx(f,{type:"select",name:"PurposeOfVisit",label:"Purpose Of Visit ",options:Xe,show:!0,required:!0,disable:!D,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:S,formik:p,fldStyle:"col-12 md:col-4",filter:!0}),t.jsx(f,{type:"textarea",name:"VisitorRemarks",label:"Visitor Remarks ",options:"",show:!1,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",formik:p,fldStyle:"col-12 md:col-4",maxlength:"500",style:{maxHeight:"100px",overflowY:"auto"}})]})})})})}),t.jsx("div",{className:"white",hidden:ge,children:t.jsx("div",{className:g?"p-disabled":"",children:t.jsx("div",{className:"widget-body",children:t.jsxs("div",{className:"normal-table",children:[t.jsx("div",{className:"page-title",children:t.jsx("div",{className:"grid grid-nogutter",children:t.jsx("div",{className:"md:col-6",children:t.jsx("h1",{children:"Vehicle & Driver Details"})})})}),t.jsxs("div",{className:"grid",children:[ee?t.jsx(f,{type:"",fldStyle:"col-12 md:col-3",show:!0}):t.jsx(f,{type:"checkbox",name:"IsExistingVehicle",label:"Is Existing Vehicle ",options:"",show:!0,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleChange:fe,fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"select",name:"VehicleName",label:"Vehicle Name ",options:X,show:Y,required:!1,disable:g||!D,optionLabel:"VehicleNameAndNo",optionValue:"VehicleName",handleSelect:ve,fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"text",name:"VehicleName",label:"Vehicle Name ",options:"",show:!Y,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,maxlength:"50"}),t.jsx(f,{type:"text",name:"VehicleNo",label:"Vehicle No ",options:"",show:!0,required:!1,disable:D?Y:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,maxlength:"50"}),t.jsxs("div",{className:"col-12 md:col-3",children:[t.jsx("label",{className:"form-label",children:"Document Upload"}),t.jsxs("div",{className:"p-inputgroup",children:[t.jsx("div",{className:"browse-links",children:t.jsx(We,{label:p.values.VehicleDocumentName,link:!0,onClick:Ye})}),t.jsx(_s,{mode:"basic",chooseOptions:Be,url:"/api/upload",maxFileSize:1e6,onSelect:Z,chooseLabel:pe,auto:!0,disabled:g||!D}),t.jsx(We,{icon:"las la-times",disabled:g||!D,onClick:se})]})]}),t.jsx(f,{type:"checkbox",name:"IsExistingDriver",label:"Is Existing Driver ",options:"",show:!0,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleChange:ae,fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"select",name:"DriverId",label:"Driver Name ",options:W.filter(at=>at.DesignationId==5),show:b,required:!1,disable:g||!D,optionLabel:"EmployeeName",optionValue:"EmployeeName",handleSelect:S,fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"text",name:"DriverId",label:"Driver Name ",options:"",show:!b,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,maxlength:"50"}),t.jsx(f,{type:"select",name:"RouteId",label:"Route ",options:Ie,show:!0,required:!1,disable:g||!D,optionLabel:"RouteName",optionValue:"RouteId",handleSelect:oe,fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"text",name:"NumberOfPassengers",label:"No.Of Passengers ",options:"",show:!0,required:!1,disable:D?ge:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,keyfilter:"int",maxlength:"10"}),t.jsx(f,{type:"",name:"",label:"",options:"",show:!0,required:!1,disable:g||!D,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p}),t.jsx(f,{type:"number",name:"PlannedTravellingKm",label:"Planned Travelling Km ",options:"",show:!0,required:!1,disable:D?ge:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,maxFractionDigits:2,minFractionDigits:2,mode:"decimal",max:999999999}),t.jsx(f,{type:"number",name:"ActualTravellingKm",label:"Actual Travelling Km ",options:"",show:!0,required:!1,disable:D?ge:!0,optionLabel:"",optionValue:"",handleSelect:"",fldStyle:"col-12 md:col-3",formik:p,maxFractionDigits:2,minFractionDigits:2,mode:"decimal",max:999999999})]})]})})})})]})})},el=P=>{const C=s.useRef(null),{toast:w,tabConfig:p,visitorEntryFormik:j,pageType:me,isCreate:U,isView:g,loading:A,selectedData:ue,setShowEntryDetail:B,setVisible:K,VisitorNameList:D,visitorEntryDetailList:S,setvisitorEntryDetailList:q,setVisitorTypeList:T,setIsPreBookingList:z,setProofList:_,setStatusList:he,setTitleList:Ce,setEmployeeList:F,setDepartmentList:Ee,setTempVisitorNameList:W,setVisitorNameList:He,setPartyTypeList:$,setAreaList:Ge,setRouteList:Q,setDriverList:Je,setVehicleList:te,setMaterialList:Me,setVisitorEntryBelongingDetailList:ie,setList:Te,visitorEntryForm:fe,VisitorEntryValidationSchema:Y,onUpload:b,itemTemplate:Z,imageUrl:pe,IsPreBookingList:ae,VisitorTypeList:De,onChangeVisitorType:_e,handleSelect:y,autoCompleteRef:ye,OnSelectVisitorCode:Ie,onChangeMatType:Ke,filteritemType:X,handleIsPreBook:ze,VECodeDisable:$e,EmployeeList:we,onChangeVisitor:Qe,ProofList:ge,onClickIsAppointmentBooking:H,ValidFromDisable:rt,ValidToDisable:Se,onChageFromDate:Fe,TominDate:be,CheckboxDisable:Pe,onClickIsExistingVehicle:je,HideVehicleDD:ve,HideDriverDD:se,onUploadDocument:Ye,documentUrl:Ne,onClickIsExistingDriver:Ze,OnChangePartyTypes:le,PartyTypeList:oe,PartyNameList:ee,AreaList:Xe,RouteList:et,DriverList:St,VehicleList:tt,IsDeliveryChallan:ke,IsInvoiceBased:it,IsVehicleTripBased:Oe,IsPartyDisable:Ue,IsVehicleDetailsDisable:Be,ShowVisitorContranctor:at,IsMaterialDetailsShow:st,InvoiceNumberDisable:bt,DcNumberDisable:nt,PoNumberDisable:dt,ContainerNumberDisable:Le,StatusList:ct,OnChangeVehicle:mt,onChageToDate:Nt,deleteDocuments:oi,handleHyperlink:Lt,cameraOff:re,setCameraOff:xt,handleChange:ne,handleRouteSelect:Ct,initFldDisable:Et,CreatePageOnLoadCVisitorEntry:Mt,resetAllForm:Tt,IsWorkerDetailsShow:ri,IsBelongingDetailsShow:ni,VisitorEntryBelongingDetailList:di,VisitorEntryMaterialDetailList:ci,setVisitorEntryMaterialDetailList:mi,MaterialList:wt,PurposeList:Ft,IsdisableSave:ut,handlePoVSelect:Pt,selectedPlant:pt,PlantList:jt,handleVisitorSelected:yt,handlePlantSelect:vt,handleDepartmentSelect:Re,PlantWiseDepartmentList:kt,setPlantWiseDepartmentList:lt,plantDisable:Ot}=P;return ra(),s.useState([]),s.useState([]),s.useState({}),s.useState([]),s.useState([]),s.useState([]),s.useState([]),s.useState([]),s.useState([]),s.useState([]),s.useEffect(()=>{li()}),s.useEffect(()=>{U==!1?Te():Mt(0)},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"white",ref:C,children:[t.jsx("div",{className:"widget-hdr",children:t.jsx("div",{className:"sub-title",children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"col-12",children:t.jsx("h2",{children:"Host Information"})})})})}),t.jsx("div",{className:"widget-body",children:A?t.jsx(la,{}):t.jsx(t.Fragment,{children:t.jsx(Xs,{visitorEntryForm:fe,VisitorEntryValidationSchema:Y,formik:j,onUpload:b,itemTemplate:Z,isView:g,imageUrl:pe,IsPreBookingList:ae,VisitorTypeList:De,onChangeVisitorType:_e,isCreate:U,handleSelect:y,autoCompleteRef:ye,OnSelectVisitorCode:Ie,onChangeMatType:Ke,filteritemType:X,VisitorNameList:D,handleIsPreBook:ze,VECodeDisable:$e,EmployeeList:we,onChangeVisitor:Qe,ProofList:ge,onClickIsAppointmentBooking:H,ValidFromDisable:rt,ValidToDisable:Se,onChageFromDate:Fe,TominDate:be,CheckboxDisable:Pe,onClickIsExistingVehicle:je,HideVehicleDD:ve,HideDriverDD:se,onUploadDocument:Ye,documentUrl:Ne,onClickIsExistingDriver:Ze,OnChangePartyTypes:le,PartyTypeList:oe,PartyNameList:ee,AreaList:Xe,RouteList:et,DriverList:St,VehicleList:tt,PurposeList:Ft,IsDeliveryChallan:ke,IsInvoiceBased:it,IsVehicleTripBased:Oe,IsPartyDisable:Ue,IsVehicleDetailsDisable:Be,ShowVisitorContranctor:at,IsMaterialDetailsShow:st,InvoiceNumberDisable:bt,DcNumberDisable:nt,PoNumberDisable:dt,ContainerNumberDisable:Le,StatusList:ct,OnChangeVehicle:mt,onChageToDate:Nt,deleteDocuments:oi,handleHyperlink:Lt,cameraOff:re,setCameraOff:xt,handleChange:ne,handleRouteSelect:Ct,initFldDisable:Et,IsdisableSave:ut,handlePoVSelect:Pt,PlantList:jt,selectedPlant:pt,pageType:me,handlePlantSelect:vt,handleDepartmentSelect:Re,PlantWiseDepartmentList:kt,plantDisable:Ot})})})]})})};function tl(){const{search:P}=Ps();return s.useMemo(()=>new URLSearchParams(P),[P])}const il=P=>{const{successData:C}=P;return t.jsx("div",{className:"flex flex-row justify-content-center align-items-center h-full",children:t.jsx("div",{className:"align-items-center flex flex-row justify-content-center m-auto w-9 white p-5 border-round-3xl",children:t.jsx("div",{className:"col-12",children:t.jsxs("div",{className:"card mb-0 text-center",children:[t.jsx("div",{className:"flex justify-content-between mb-3",children:t.jsx("div",{className:"m-auto align-items-center bg-green-100 border-round-lg flex justify-content-center p-3",children:t.jsx("i",{className:"pi pi-check text-green-500 text-xl"})})}),t.jsx("h1",{className:"text-green-500 text-3xl",children:"Appointment Sent for Approval, will notify you the Status shortly on Mail/ WhatsApp."}),t.jsxs("span",{className:"text-green-500 text-2xl font-large",children:["Your Reference No: ",t.jsx("b",{children:C.VisitorEntryCode})]})]})})})})},kl=P=>{const C=sa(),[w,p]=s.useState(!1);s.useState([]);const[j,me]=s.useState(!1),[U,g]=s.useState({}),[A,ue]=s.useState(!0),[B,K]=s.useState(!1),[D,S]=s.useState(!1);s.useState(!1);const[q,T]=s.useState([]),[z,_]=s.useState([]);s.useState({});const[he,Ce]=s.useState([]),[F,Ee]=s.useState(""),[W,He]=s.useState("");s.useState(!1);const[$,Ge]=s.useState(),[Q,Je]=s.useState(),[te,Me]=s.useState(),[ie,Te]=s.useState(!1),[fe,Y]=s.useState(!1),[b,Z]=s.useState({});s.useState(!1);const[pe,ae]=s.useState([]),[De,_e]=s.useState([]),y=s.useRef(),[ye,Ie]=s.useState(!1),[Ke,X]=s.useState([]),[ze,$e]=s.useState([]),[we,Qe]=s.useState([]),[ge,H]=s.useState([]),[rt,Se]=s.useState([]),[Fe,be]=s.useState([]),[Pe,je]=s.useState([]),[ve,se]=s.useState([]),[Ye,Ne]=s.useState(gt.NO_IMG),[Ze,le]=s.useState(null),[oe,ee]=s.useState(null),Xe=s.useRef(null),[et,St]=s.useState([]),[tt,ke]=s.useState([]),[it,Oe]=s.useState([]),[Ue,Be]=s.useState([]),[at,st]=s.useState([]),[bt,nt]=s.useState([]),[dt,Le]=s.useState([]),[ct,mt]=s.useState(),[Nt,oi]=s.useState(!0),[Lt,re]=s.useState(!0),[xt,ne]=s.useState(!0),[Ct,Et]=s.useState(null),[Mt,Tt]=s.useState(!1),[ri,ni]=s.useState(!1),[di,ci]=s.useState(!1),[mi,wt]=s.useState(!1),[Ft,ut]=s.useState(!1),[Pt,pt]=s.useState(!1),[jt,yt]=s.useState(!1),[vt,Re]=s.useState(!0),[kt,lt]=s.useState(!1),[Ot,Ut]=s.useState(!1),[na,ui]=s.useState(!1),[da,pi]=s.useState(!0),[yi,O]=s.useState(!1),[Bt,Ae]=s.useState([]),[Vi,xe]=s.useState([]),[ca,hi]=s.useState([]),[Rt,ot]=s.useState(""),[ma,At]=s.useState(!0),[ua,fi]=s.useState(!0),[pa,Di]=s.useState(!0),[ya,qt]=s.useState(!0),[Va,al]=s.useState(!0);s.useState(!0),s.useState({});const[ha,Ii]=s.useState([]),[fa,Vt]=s.useState([]);s.useState();const[gi,Si]=s.useState(!1),[Da,Wt]=s.useState(!1),[Ia,ga]=s.useState(),v=ra(),Sa=[{Id:1,CountryCode:"+91",CountryName:"India"}],{isCreate:k,isView:bi,SearchData:sl,loading:ba,error:ll,tranStatus:ol,DtoEmployeeList:rl,DtoDepartmentList:Ni,DtoStatusList:Li,DtoTitleList:xi,DtoIsPreBookingList:Na,DtoVisitorTypeList:La,DtoProofList:Ci,DtoVisitorEntryTypeList:nl,DtoVisitorEntryHeader:l,DtoVisitorEntryDetail:Ei,DtoVisitorEntryBelongingDetail:xa,DtoVisitorEntryMaterialDetail:Ca,DtoVisitorEntryList:dl,DtoVisitorEntryCodeList:cl,DtoVisitorEmployeeList:ml,DtoVisitorNameList:Ea,DtoVisitorWorkerList:ul,DtoPreBookingList:pl,DtoPartyTypeList:Ma,DtoAreaList:yl,DtoRouteList:Ta,DtoPartyNameList:Vl,DtoDriverList:wa,DtoVehicleList:Fa,DtoMaterialList:Pa,DtoPurposeList:ja,DtoVisitorEntryPovDetail:Mi,DtoPlantList:va}=ea(e=>e.externalBookEntry),ka={VisitorEntryId:l?l.VisitorEntryId:0,VisitorEntryCode:l?l.VisitorEntryCode:"",VisitorEntryDate:l?new Date(l.VisitorEntryDate):new Date,CompanyId:l?l.CompanyId:localStorage.CompanyId,PlantId:l?l.PlantId:null,GateId:l?l.GateId:localStorage.GateId,VisitorTypeId:l?l.VisitorTypeId:35,VisitorId:l?l.VisitorId:null,PersonName:l?l.PersonName:"",MobileNo:l?l.MobileNo:"",TagNo:l?l.TagNo:"",IdProofType:l?l.IdProofType:null,IdProofNo:l?l.IdProofNo:"",VisitedEmployeeId:l?l.VisitedEmployeeId:null,ValidFrom:l?new Date(l.ValidFrom):new Date,ValidTo:l?new Date(l.ValidTo):new Date,AccessType:l?l.AccessType:null,IsExtended:l?l.IsExtended:!1,IsAppointmentBooking:l?l.IsAppointmentBooking:!1,IsPreBooking:l?l.IsPreBooking:16,VisitorRemarks:l?l.VisitorRemarks:"",PurposeOfVisit:l?l.PurposeOfVisit:"",AreaToVisit:l?l.AreaToVisit:null,VisitorImageName:l?l.VisitorImageName:"",VisitorImageUrl:l?l.VisitorImageUrl:"",PartyType:l?l.PartyType:null,PartyName:l?l.PartyName:null,InvoiceNumber:l?l.InvoiceNumber:"",DcNumber:l?l.DcNumber:"",PoNumber:l?l.PoNumber:"",ContainerNumber:l?l.ContainerNumber:"",IsExistingVehicle:l?l.IsExistingVehicle:null,VehicleName:l?l.VehicleName:"",VehicleNo:l?l.VehicleNo:"",IsExistingDriver:l?l.IsExistingDriver:null,DriverId:l?l.DriverId:"",VehicleDocumentName:l?l.VehicleDocumentName:"",VehicleDocumentUrl:l?l.VehicleDocumentUrl:"",RouteId:l?l.RouteId:null,NumberOfPassengers:l?l.NumberOfPassengers:"",PlannedTravellingKm:l?l.PlannedTravellingKm:"",ActualTravellingKm:l?l.ActualTravellingKm:"",Status:l?l.Status:74,CreatedBy:0,CreatedOn:l?new Date(l.CreatedOn):new Date,ModifiedBy:0,ModifiedOn:l?new Date:null,IsExternal:1,IsInternalAppointment:0};function Oa(e){e.matches?Si(!0):Si(!1)}s.useEffect(()=>{var e=window.matchMedia("(max-width: 767px)");e.addEventListener("change",function(){Oa(e)})});const d=ai({initialValues:ka,validationSchema:Ks,onSubmit:(e,{resetForm:n})=>{O(!0),e.IsExternal=!0;const i=new FormData;let a=z,o=Bt,r=Vi;e.VisitorTypeId==35&&(r=[]),e.VisitorTypeId==36&&(r=[]),e.VisitorTypeId==64&&(a=[],o=[]),e.VisitorTypeId==65&&(a=[],o=[]),e.VisitorTypeId==66&&(r=[],a=[]);let c=[],V=[],L=[],x=new Date(e.ValidFrom.getFullYear(),e.ValidFrom.getMonth(),e.ValidFrom.getDate());if(x.setHours(23,59,59,999),a.length>0)for(let M=0;M<a.length;M++){const I=a[M];let h={};h.VisitorEntryDetailId=I.VisitorEntryDetailId??0,h.VisitorEntryDetailCode=I.visitordetailCode??0,h.VisitorEntryId=I.VisitorEntryId??0,h.TitleId=I.TitleId,h.FirstName=I.FirstName,h.LastName=I.LastName,h.DepartmentId=I.DepartmentId,h.Dob=I.Dob,h.MailId=I.MailId,h.MobileNo=I.MobileNo,h.IdCardType=I.IdCardType,h.IdCardNo=I.IdCardNo,h.DocumentName=I.DocumentName,h.DocumentUrl=I.DocumentName,h.Status=I.Status,h.ValidFrom=ta(e.ValidFrom),h.ValidTo=e.VisitorTypeId==35?R(x):ta(e.ValidTo),h.IsEditedImage=1,c.push(h)}if(o.length>0)for(let M=0;M<o.length;M++){const I=o[M];let h={};h.VisitorEntryBelongingDetailId=I.VisitorEntryBelongingDetailId??0,h.VisitorEntryId=I.VisitorEntryId??0,h.DeviceNo=I.DeviceNo,h.DeviceName=I.DeviceName,V.push(h)}if(r.length>0)for(let M=0;M<r.length;M++){const I=r[M];let h={};h.VisitorEntryMaterialDetailId=I.VisitorEntryMaterialDetailId??0,h.VisitorEntryId=I.VisitorEntryId??0,h.MaterialId=I.MaterialId,h.Uom=I.Uom,h.Qty=I.Qty,L.push(h)}var ce=new Date(e.ValidFrom.getFullYear(),e.ValidFrom.getMonth(),e.ValidFrom.getDate());ce.setHours(23,59,59,999),e.ValidFrom=R(new Date(e.ValidFrom)),e.ValidFrom=R(new Date(e.ValidFrom)),e.ValidTo=e.VisitorTypeId==35?R(ce):R(new Date(e.ValidTo)),e.VisitorEntryDate=R(new Date(e.VisitorEntryDate)),e.CreatedOn=R(new Date(e.CreatedOn)),e.TagNo=N.values.TagNo,e.CompanyId=+localStorage.CompanyId,e.IsInternalAppointment=0,e.IsExternal=1,e.IsEditedImage=1,k||(e.ModifiedOn=R(new Date(e.ModifiedOn)));let E=JSON.stringify({VisitorEntry:e,VisitorEntryDetail:c??[],VisitorEntryBelongingDetail:V??[],VisitorEntryMaterialDetail:L??[],VisitorEntryAtvDetail:fa??[]});if(i.append("input",E),i.append("webfile",Ze),i.append("webfile1",oe),i.append("webfiles",[]),k==!1){var J=v(ia(i));J.then(M=>{var I,h;M.payload.tranStatus.result==!0?((I=y.current)==null||I.show({severity:"success",summary:"Success Message",detail:M.payload.tranStatus.lstErrorItem[0].Message}),setTimeout(()=>{C.push("/home/vVisitorEntry")},800),S(!1)):((h=y.current)==null||h.show({severity:"error",summary:"Error Message",detail:M.payload.tranStatus.lstErrorItem[0].Message}),O(!1))}).catch(M=>{var I;O(!1),(I=y.current)==null||I.show({severity:"error",summary:"Error",detail:JSON.stringify(M)})})}else{var J=v(js(i));J.then(I=>{var h;I.payload.tranStatus.result==!0?(O(!1),me(!0),g(I.payload.VisitorEntryHeader),S(!1),Gt()):(O(!1),(h=y.current)==null||h.show({severity:"error",summary:"Error",detail:I.payload.tranStatus.lstErrorItem[0].Message}))}).catch(I=>{var h;O(!1),(h=y.current)==null||h.show({severity:"error",summary:"Error",detail:JSON.stringify(I)})})}}}),Ht=(e,n)=>{T(n);let a=n.filter(o=>o.VisitorDetails.some(r=>r.VisitorDetailId===e)).map(o=>({...o,VisitorDetails:o.VisitorDetails.filter(r=>r.VisitorDetailId===e)})).flatMap(o=>o.VisitorDetails);Fi("VisitorId",{},a[0].VisitorDetailId,n)};s.useEffect(()=>{});const Ua=()=>{be(La),Se(Na),je(Ci),Qe(Li),H(xi),$e(Ni),se(Ea),ke(Ma),Be(Ta),nt(wa),Le(Fa),hi(Pa),Ii(ja);let e=[];for(let i=0;i<Ei.length;i++){const a=Ei[i];let o={};o.VisitorEntryDetailId=a.VisitorEntryDetailId,o.VisitorEntryDetailCode=a.visitordetailCode,o.VisitorEntryId=a.VisitorEntryId,o.VisitorId=a.VisitorId,o.TitleId=a.TitleId,o.FirstName=a.FirstName,o.LastName=a.LastName,o.DepartmentId=a.DepartmentId,o.Dob=new Date(a.Dob),o.MailId=a.MailId,o.MobileNo=a.CountryCode,o.IdCardType=a.IdCardType,o.IdCardNo=a.IdCardNo,o.DocumentName=a.DocumentName,o.DocumentUrl=a.DocumentUrl,o.Status=a.Status,o.VisitorName=xi.find(c=>c.MetaSubId==a.TitleId).MetaSubDescription+"."+o.FirstName+" "+o.LastName,o.StatusName=Li.find(c=>c.MetaSubId==a.Status).MetaSubDescription,o.IdCardTypeName=Ci.find(c=>c.MetaSubId==a.IdCardType).MetaSubDescription,a.DepartmentId?o.DepartMentName=Ni.find(c=>c.DepartmentId==a.DepartmentId).DepartmentName:o.DepartMentName="";const r=new Date(a.Dob).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});o.ShowDate=r,e.push(o)}_(e),Ae(xa),xe(Ca),Vt(Mi),ft("VisitorTypeId",{},l.VisitorTypeId),l.PartyType&&Pi("PartyType",{},l.PartyType);let n=Mi.map(i=>i.AreaToVisit);wi("AreaToVisit",{},n,1),ht(l.VisitorImageUrl).then(i=>{const a=new File([i],l.VisitorImageName,{type:"image/*",lastModified:1695716506050});le(a),Ne(l.VisitorImageUrl)}).catch(i=>{var a;(a=y.current)==null||a.show({severity:"error",detail:"Error",summary:JSON.stringify(i)})}),(l.VisitorTypeId==64||l.VisitorTypeId==65||l.VisitorTypeId==66)&&ht(l.VehicleDocumentUrl).then(i=>{const a=new File([i],l.VehicleDocumentName,{type:"image/*",lastModified:1695716506050});ee(a),ot(l.VehicleDocumentUrl)}).catch(i=>{var a;(a=y.current)==null||a.show({severity:"error",detail:"Error",summary:JSON.stringify(i)})})},Ba=e=>{var i=v(si({VisitorEntryId:e,CompanyId:1,RoleId:1}));i.then(a=>{var o;if(a.payload.tranStatus.result==!0){if(console.log(Ve.size,Ve.get("PlantId")),Ve&&Ve.size>=0&&Ve.get("PlantId")!=""&&Ve.get("PlantId")!=null&&d.values.PlantId==null){let r=a.payload.PlantList.filter(c=>c.PlantId==+Ve.get("PlantId"));r&&r.length>0?(Oi("PlantId",{},+Ve.get("PlantId")),Wt(!0)):Wt(!1)}else Wt(!1);if(be(a.payload.VisitorTypeList),Se(a.payload.IsPreBookingList),je(a.payload.ProofList),Qe(a.payload.StatusList),H(a.payload.TitleList),$e(a.payload.DepartmentList),se(a.payload.VisitorNameList),T(a.payload.VisitorNameList),ke(a.payload.PartyTypeList),Be(a.payload.RouteList),nt(a.payload.DriverList),Le(a.payload.VehicleList),mt(a.payload.VehicleList),hi(a.payload.MaterialList),Ii(a.payload.PurposeList),k==!0){+(b==null?void 0:b.selectedType)!=66&&+(b==null?void 0:b.selectedType);let r={};r.VisitorEntryMaterialDetailId=0,r.VisitorEntryId=0,r.MaterialId=null,r.Uom=null,r.Qty="",xe([r])}}else(o=y.current)==null||o.show({severity:"error",detail:"Error",summary:a.payload.tranStatus.lstErrorItem[0].Message})}).catch(a=>{var o;(o=y.current)==null||o.show({severity:"error",detail:"Error",summary:JSON.stringify(a)})})};s.useEffect(()=>{});const Ti=(e,n,i)=>{d.setFieldValue(e,i),e=="PlantId"&&(ga(i),d.setFieldValue("AreaToVisit",null))},wi=(e,n,i,a=0)=>{if(d.setFieldValue(e,i),a==0){Vt([]);let o=[];for(let r=0;r<i.length;r++){const c=i[r];let V={};V.VisitorEntryAtvDetailId=0,V.VisitorEntryId=0,V.AreaToVisit=c,o.push(V)}Vt(o)}},Ra=(e,n,i)=>{d.setFieldValue(e,i);let a=Ue.find(o=>o.RouteId==i).RouteDistanceInKm;d.setFieldValue("PlannedTravellingKm",a)},Aa=e=>{d.setFieldValue(e.target.name,e.value)},qa=(e,n,i)=>{d.setFieldValue(e,i)},G=e=>{var n;O(!1),(n=y.current)==null||n.show({severity:"warn",summary:"Warning Message",detail:e})},R=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});async function ht(e){const n=await vs(e);if(!n.ok)throw new Error(`Failed to fetch image: ${n.statusText}`);return await n.blob()}const Gt=()=>{d.resetForm();let e={},n={};e.VisitorEntryBelongingDetailId=0,e.VisitorEntryId=0,e.DeviceNo="",e.DeviceName="Mobile",n.VisitorEntryBelongingDetailId=0,n.VisitorEntryId=0,n.DeviceNo="",n.DeviceName="Laptop",Ae([e,n]);let i={};i.VisitorEntryMaterialDetailId=0,i.VisitorEntryId=0,i.MaterialId=null,i.Uom=null,i.Qty="",xe([i]),xe([]),Vt([]),le(null),Ne(gt.NO_IMG),ee(null),ot(""),st([]),Ui(0)},Fi=(e,n,i,a)=>{if(d.setFieldValue(e,i),a.length>0){let r=a.find(c=>c.VisitorDetails.find(V=>V.VisitorDetailId==i));if(r&&(d.setFieldValue("PersonName",r.FirstName),d.setFieldValue("MobileNo",r.MobileNo),d.setFieldValue("IdProofType",r.IdCardType),d.setFieldValue("IdProofNo",r.IdCardNo),d.setFieldValue("TagNo",r.TagNo),lt(!1),_([]),d.values.VisitorTypeId==36||d.values.VisitorTypeId==35)){let c={VisitorTypeId:d.values.VisitorTypeId,VisitorId:i,Detail:0};var o=v(ks(c));o.then(V=>{var L;if(V.payload.tranStatus.result==!0){let x=V.payload.VisitorWorkerList;for(let ce=0;ce<x.length;ce++){const u=x[ce];u.Dob=new Date(u.Dob);const E=u.Dob.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});u.ShowDate=E}_(x)}else(L=y.current)==null||L.show({severity:"error",detail:"Error",summary:V.payload.tranStatus.lstErrorItem[0].Message})}).catch(V=>{var L;(L=y.current)==null||L.show({severity:"error",detail:"Error",summary:JSON.stringify(V)})})}}};s.useEffect(()=>{var e;z&&z.length>0&&(d.handleSubmit(),O(!1),(e=y.current)==null||e.show({severity:"success",summary:"Success Message",detail:"Appoinment Booked Succeessfully"}))},[z]);const Pi=(e,n,i)=>{d.setFieldValue(e,i);var o=v(Os({PartyType:i}));o.then(r=>{var c;r.payload.tranStatus.result==!0?st(r.payload.PartyNameList):(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:r.payload.tranStatus.lstErrorItem[0].Message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:JSON.stringify(r)})})},ji=e=>{d.setFieldValue(e.target.name,e.checked);let n=e.value?e.value:d.values.VisitorTypeId,i={target:{name:"ValidFrom"},value:l?new Date(l.ValidFrom):new Date,VisitorTypeId:n},a={target:{name:"IsExistingVehicle"},checked:l?l.IsExistingVehicle:!0};vi(a);let o={target:{name:"IsExistingDriver"},checked:l?l.IsExistingDriver:!0};if(ki(o),yt(!0),wt(!1),ut(!1),pt(!1),Re(!0),pi(!0),lt(!1),k){d.setFieldValue("PartyType",null),d.setFieldValue("PartyName",null),d.setFieldValue("RouteId",null),d.setFieldValue("NumberOfPassengers",""),d.setFieldValue("PlannedTravellingKm",""),d.setFieldValue("ActualTravellingKm",""),d.setFieldValue("ValidFrom",new Date),d.setFieldValue("ValidTo",new Date),st([]),xe([]),Ae([]);let r={},c={};r.VisitorEntryBelongingDetailId=0,r.VisitorEntryId=0,r.DeviceNo="",r.DeviceName="Mobile",c.VisitorEntryBelongingDetailId=0,c.VisitorEntryId=0,c.DeviceNo="",c.DeviceName="Laptop",Ae([r,c]);let V={};V.VisitorEntryMaterialDetailId=0,V.VisitorEntryId=0,V.MaterialId=null,V.Uom=null,V.Qty="",xe([V])}Ut(!1),ui(!1),At(!0),fi(!0),Di(!0),qt(!0),Tt(!0),n==35?(Ut(!0),Tt(!1),e.checked?(re(!1),ne(!0)):(re(!0),ne(!0)),Jt(i)):n==36?(Ut(!0),ui(!0),e.checked?(re(!1),ne(!1),Jt(i)):(re(!0),ne(!0))):(pi(!1),n==64?(yt(!1),wt(!0),Re(!1),lt(!0),re(!0),ne(!0),At(!1),fi(!1),qt(!1)):n==65?(yt(!1),ut(!0),Re(!1),lt(!0),re(!0),ne(!0),At(!1),Di(!1),qt(!1)):n==66&&(pt(!0),Re(!1),re(!0),ne(!0)))},Wa=e=>{d.setFieldValue(e.target.name,e.value),e.value==15?C.push("/home/vVisitorEntry"):(d.setFieldValue("VisitorEntryCode",""),d.setFieldValue("VisitorEntryDate",new Date),ft("VisitorTypeId",{},35),ii("VisitorTypeId",{},35))},Jt=e=>{d.setFieldValue(e.target.name,e.value);let n=e.VisitorTypeId?e.VisitorTypeId:d.values.VisitorTypeId;n==35?d.setFieldValue("ValidTo",e.value):n==36&&(d.setFieldValue("ValidTo",null),Et(e.value))},Ha=e=>{d.setFieldValue(e.target.name,e.value)},vi=e=>{d.setFieldValue(e.target.name,e.checked),k&&(d.setFieldValue("VehicleName",""),d.setFieldValue("VehicleNo","")),ni(e.checked)},Ga=(e,n,i)=>{d.setFieldValue(e,i),d.setFieldValue("VehicleNo",dt.find(a=>a.VehicleName==i).VehicleNo)},ki=e=>{d.setFieldValue(e.target.name,e.checked),k&&d.setFieldValue("DriverId",""),ci(e.checked)},Ja=(e,n,i)=>{d.setFieldValue(e,i)},_a=e=>{le(e),d.setFieldValue("VisitorImageName",e.name),d.setFieldValue("VisitorImageUrl",e.name);const n=URL.createObjectURL(e);Ne(n)},Ka=e=>{ee(e.files[0]),d.setFieldValue("VehicleDocumentName",e.files[0].name),d.setFieldValue("VehicleDocumentUrl",e.files[0].name);const n=URL.createObjectURL(e.files[0]);ot(n)},za=()=>{ot(""),ee(null),d.setFieldValue("VehicleDocumentName",""),d.setFieldValue("VehicleDocumentUrl","")},$a=()=>{Rt!=""&&window.open(Rt,"_blank")},Qa=()=>t.jsxs("div",{className:"flex align-items-center flex-column",children:[t.jsx("i",{className:"pi pi-image mt-3 p-5",style:{fontSize:"5em",borderRadius:"50%",backgroundColor:"var(--surface-b)",color:"var(--surface-d)"}}),t.jsx("span",{style:{fontSize:"1.2em",color:"var(--text-color-secondary)"},className:"my-5",children:"Drag and Drop Image Here"})]}),ft=(e,n,i)=>{console.log(e,n,i),T([]),k&&_([]),d.setFieldValue(e,i);let a={VisitorTypeId:i,CompanyId:+localStorage.CompanyId,RoleId:1};var o=v(Us(a));o.then(r=>{var c;r.payload.tranStatus.result==!0?(T(r.payload.VisitorNameList),se(r.payload.VisitorNameList),Le(r.payload.VehicleList),mt(r.payload.VehicleList),k&&(d.setFieldValue("VisitorId",null),d.setFieldValue("PersonName",""),d.setFieldValue("MobileNo",""),d.setFieldValue("IdProofType",null),d.setFieldValue("IdProofNo",""),d.setFieldValue("InvoiceNumber",""),d.setFieldValue("DcNumber",""),d.setFieldValue("PoNumber",""),d.setFieldValue("ContainerNumber","")),ji({target:{name:"IsAppointmentBooking"},checked:!0,value:i})):(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:r.payload.tranStatus.lstErrorItem[0].Message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:JSON.stringify(r)})})},Oi=(e,n,i)=>{d.setFieldValue("DeptId",null),d.setFieldValue("VisitedEmployeeId",null),d.setFieldValue("AreaToVisit",null),X([]),Ai([]),Oe([]),d.setFieldValue(e,i);var o=v(Bs({PlantId:i}));o.then(r=>{var c;r.payload.tranStatus.result==!0?(Ai(r.payload.OnchangePlantList),Oe(r.payload.AreaList)):(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:r.payload.tranStatus.lstErrorItem[0].Message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:JSON.stringify(r)})})},Ya=(e,n,i)=>{d.setFieldValue(e,i);var o=v(Rs({DeptId:i}));o.then(r=>{var c;r.payload.tranStatus.result==!0?X(r.payload.EmployeeList):(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:r.payload.tranStatus.lstErrorItem[0].Message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",detail:"Error",summary:JSON.stringify(r)})})};s.useEffect(()=>{localStorage.setItem("CompanyId","1"),li(),Z({...b,selectedType:35}),(A||!A)&&(Ui(0),Zi({value:!1}))},[A]),s.useEffect(()=>{A||(((b==null?void 0:b.selectedType)!=66||(b==null?void 0:b.selectedType)!=65)&&$&&Q&&Object.keys($).length>0&&Object.keys(Q).length>0&&$&&Q&&S(!0),te&&Object.keys(te).length>0&&S(!0),ie&&S(!0))},[$,Q,te,ie]);const Ui=e=>{if(A){const i={VisitorEntryId:e,CompanyId:+localStorage.CompanyId||"1",RoleId:1};var n=v(si(i));n.then(a=>{a.payload.tranStatus.result==!0&&(T(a.payload.VisitorNameList),se(a.payload.VisitorNameList))}).catch(a=>{})}else{const i={VisitorEntryId:e,CompanyId:+localStorage.CompanyId,RoleId:1};var n=v(si(i));n.then(o=>{o.payload.tranStatus.result==!0&&(T(o.payload.VisitorNameList),se(o.payload.VisitorNameList))}).catch(o=>{})}};Cs.Fragment,s.useEffect(()=>{const e=setTimeout(()=>{if(W=="visit_search"){const n=ve.filter(i=>i.FirstName.toLowerCase().includes(F.toLowerCase()));T(n),F==""&&T(ve)}if(W=="host_search"){const n=he.filter(i=>i.EmployeeName.toLowerCase().includes(F.toLowerCase()));X(n),F==""&&X(he)}if(W=="vehicle_search"){const n=ct.filter(i=>i.VehicleNo.includes(F));Le(n),F==""&&Le(ct)}if(W=="appointment_search"){const n=De.filter(i=>i.VisitorEntryCode.includes(F));ae(n),F==""&&ae(De)}},10);return()=>clearTimeout(e)},[F,W]);const Bi=()=>{w?(localStorage.setItem("visMaster",JSON.stringify(d.values)),p(!1)):Xa(d.values)==!0&&p(!0)},Za=e=>{const n=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;return e.TitleId==""||e.TitleId==null?G("Please Select Title."):e.FirstName==""||e.FirstName==null?G(`Please Enter ${B?"Worker":"Visitor"} Name.`):e.MailId==""||e.MailId==null?G("Please enter Mail ID."):n.test(e.MailId)?e.CountryCode==""||e.CountryCode==null?G("Please Enter Mobile No."):e.CountryCode.length!=10?G("Please Enter Valid Mobile No."):e.DocumentUrl==""||e.DocumentUrl==null||e.DocumentName==""||e.DocumentName==null?G("Please Capture Image."):!0:G("Please Enter Valid Mail ID.")},Xa=e=>(console.log(e.ValidFrom),e.PlantId==""||e.PlantId==null?G("Please Select Plant"):e.VisitedEmployeeId?!e.ValidFrom&&e.VisitorTypeId!=36?G("Please Select Appointment Date"):e.PurposeOfVisit==null||e.PurposeOfVisit==""?G("Please Select Purpose Of Visit"):!0:G("Please Select Person To Visit")),es=()=>{if(Za(N.values)==!0){if(!d.values.ValidTo&&d.values.VisitorTypeId==36)return G("Please Select Valid To Date");N.handleSubmit()}},ts=s.useRef();s.useRef();const[is,Ri]=s.useState(gt.NO_IMG);s.useState("");const[_t,Kt]=s.useState(""),[de,zt]=s.useState([]),[as,Ai]=s.useState([]),[hl,ss]=s.useState(null);s.useState(null);const[ls,qi]=s.useState(null),[qe,$t]=s.useState([]),[Qt,fl]=s.useState([]),[Dl,Wi]=s.useState(!0),[os,Yt]=s.useState([]),[rs,Dt]=s.useState([]);s.useState(!1),s.useRef();const It=s.useRef(),Hi=s.useRef(),[Gi,ns]=s.useState(-1);s.useState({global:{value:null,matchMode:Es.CONTAINS}}),s.useState("");const Ve=tl();s.useEffect(()=>{li(),localStorage.setItem("CompanyId","1")});const{isCreateVM:ds,isViewVM:cs,createEditData:Il,loadingVM:gl,errorVM:Sl,tranStatusVM:bl,VisitorHeaderVM:m,VisitorTypeListVM:ms,TitleListVM:Zt,IdCardListVM:Xt,StatusListVM:us,CountryListVM:ps,StateListVM:ei,CityListVM:ti,DepartmentListVM:Nl,VisitorDetailVM:Ji,VisitorSearchList:Ll,WorkSeverityListVM:_i}=ea(e=>e.externalBookVisitor);s.useEffect(()=>{if(k==!1||bi==!0){k||(m.VisitorTypeId==35?Wi(!0):Wi(!1));let n=[];for(let i=0;i<Ji.length;i++){const a=Ji[i];let o={};o.VisitorDetailId=a.VisitorDetailId,o.VisitorId=a.VisitorId,o.TitleId=a.TitleId,o.FirstName=a.FirstName,o.LastName=a.LastName,o.DepartmentId=a.DepartmentId,o.Dob=new Date(a.Dob),o.MailId=a.MailId,o.MobileNo=a.MobileNo,o.IdCardType=a.IdCardType,o.IdCardNo=a.IdCardNo,o.DocumentName=a.DocumentName,o.DocumentUrl=a.DocumentUrl,o.Status=a.Status,o.ExpirryDate=a.ExpirryDate,o.WorkSeverity=a.WorkSeverity,o.VisitorName=Zt.find(V=>V.MetaSubId==o.TitleId).MetaSubDescription+". "+a.FirstName+" "+a.LastName,o.DepartMentName=a.DepartmentId?ze.find(V=>V.DepartmentId==a.DepartmentId).DepartmentName:null,o.IdCardTypeName=Xt.find(V=>V.MetaSubId==a.IdCardType).MetaSubDescription,o.StatusName=we.find(V=>V.MetaSubId==a.Status).MetaSubDescription,o.WorkSeverityName=_i.find(V=>V.MetaSubId==a.WorkSeverity).MetaSubDescription;const r=new Date(a.Dob).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});o.ShowDate=r;const c=new Date(a.ExpirryDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});o.ShowExpirryDate=c,n.push(o),ht(o.DocumentUrl).then(V=>{const L=new File([V],o.DocumentName,{type:"image/*",lastModified:1695716506050});$t([...qe,L])}).catch(V=>{console.error("Error fetching image:",V)})}zt(n),Kt(m.VisitorDocumentUrl),ht(m.DocumentUrl).then(i=>{const a=new File([i],m.DocumentName,{type:"image/*",lastModified:1695716506050});le(a),Ne(m.DocumentUrl)}).catch(i=>{console.error("Error fetching image:",i)})}else{const n={VisitorId:0,CompanyId:+localStorage.CompanyId};var e=v(Ms(n));e.then(i=>{var a;i.payload.tranStatus.result?i.payload.CountryList&&i.payload.CountryList.length&&i.payload.CountryList.length>0&&$i("CountryId",{},i.payload.CountryList[0].CountryId):(a=y.current)==null||a.show({severity:"error",summary:"Error",detail:i.payload.tranStatus.lstErrorItem.message})}).catch(i=>{var a;(a=y.current)==null||a.show({severity:"error",summary:"Error",detail:JSON.stringify(i)})})}},[]),s.useEffect(()=>{Dt(ti),Yt(ei)},[ti,ei]);const Ki={VisitorId:m!=null?m.VisitorId:0,VisitorCode:m!=null?m.VisitorCode:"",VisitorTypeId:m!=null?m.VisitorTypeId:35,CompanyId:m!=null?m.CompanyId:+localStorage.CompanyId,PlantId:m!=null?m.PlantId:+localStorage.PlantId,CountryId:m!=null?m.CountryId:null,StateId:m!=null?m.StateId:null,CityId:m!=null?m.CityId:null,TitleId:m!=null?m.TitleId:37,FirstName:m!=null?m.FirstName:"",LastName:m!=null?m.LastName:"",Dob:m!=null?new Date(m.Dob):new Date,VisitorCompany:m!=null?m.VisitorCompany:"",Address:m!=null?m.Address:"",MailId:m!=null?m.MailId:"",MobileNo:m!=null?m.MobileNo:"",TagNo:m!=null?m.TagNo:"",IdCardType:m!=null?m.IdCardType:17,IdCardNo:m!=null?m.IdCardNo:"",DocumentName:m!=null?m.DocumentName:"",DocumentUrl:m!=null?m.DocumentUrl:"",VisitorDocumentName:m!=null?m.VisitorDocumentName:"",VisitorDocumentUrl:m!=null?m.VisitorDocumentUrl:"",Status:m!=null?m.Status:1,CreatedBy:0,CreatedOn:m!=null?new Date(m.CreatedOn):new Date,ModifiedBy:0,ModifiedOn:m!=null?new Date:null},ys={VisitorDetailId:0,VisitorId:0,TitleId:37,FirstName:"",LastName:"",DepartmentId:null,Dob:new Date,MailId:"",MobileNo:"",IdCardType:17,IdCardNo:"",DocumentName:"",DocumentUrl:"",Status:1,ExpirryDate:new Date,WorkSeverity:96},N=ai({initialValues:Ki,validationSchema:Ws,onSubmit:(e,{resetForm:n})=>{var c;if(w){O(!0);const V=new FormData;let L=[];if(e.Dob=R(new Date(e.Dob)),e.CreatedOn=R(new Date(e.CreatedOn)),k||(e.ModifiedOn=R(new Date(e.ModifiedOn))),e.VisitorTypeId==35||e.VisitorTypeId==36&&k==!0){let u={};u.VisitorDetailId=0,u.VisitorId=0,u.TitleId=e.TitleId,u.FirstName=e.FirstName,u.LastName=e.LastName,u.DepartmentId=null,u.Dob=e.Dob,u.MailId=e.MailId,u.MobileNo=e.CountryCode,u.IdCardType=e.IdCardType,u.IdCardNo=e.IdCardNo,u.DocumentName=e.DocumentName,u.DocumentUrl=e.DocumentUrl,u.Status=e.Status,u.ExpirryDate=new Date,u.WorkSeverity=96,L.push(u)}else e.VisitorTypeId==35&&k==!1?(de.forEach(u=>{u.TitleId=e.TitleId,u.FirstName=e.FirstName,u.LastName=e.LastName,u.Dob=e.Dob,u.MailId=e.MailId,u.MobileNo=e.CountryCode,u.IdCardType=e.IdCardType,u.IdCardNo=e.IdCardNo}),L=de):(de.forEach(u=>{delete u.VisitorName,delete u.DepartMentName,delete u.IdCardTypeName,delete u.StatusName,delete u.ShowExpirryDate,delete u.WorkSeverityName,u.Dob=R(new Date(u.Dob)),u.ExpirryDate=R(new Date(u.ExpirryDate))}),L=de);L.length==0&&O(!1),V.append("webfile",Ze),V.append("webfile1",ls);for(var i in qe){var a=L.findIndex(u=>u.DocumentName==qe[i].name);a!=-1&&V.append("webfiles",qe[i])}for(var o in Qt){var a=L.findIndex(E=>E.DocumentName==Qt[i].name);a!=-1&&V.append("webfile1",Qt[i])}e.MobileNo=e.CountryCode,e.CompanyId=+localStorage.CompanyId,e.PlantId=d.values.PlantId;let ce=JSON.stringify({Visitor:e,VisitorDetail:L});if(V.append("input",ce),k==!1){if(!m.VisitorDocumentUrl){(c=y.current)==null||c.show({severity:"warn",summary:"Warning Message",detail:"Please Add Document."});return}var r=v(ia(V));r.then(u=>{var E,J;u.payload.tranStatus.result==!0?(E=y.current)==null||E.show({severity:"success",summary:"Success Message",detail:u.payload.tranStatus.lstErrorItem[0].Message}):(O(!1),(J=y.current)==null||J.show({severity:"error",summary:"Error Message",detail:u.payload.tranStatus.lstErrorItem[0].Message}))}).catch(u=>{var E;O(!1),(E=y.current)==null||E.show({severity:"error",summary:"Error",detail:JSON.stringify(u)})})}else{var r=v(As(V));r.then(E=>{var J,M,I,h,Xi;E.payload.tranStatus.result==!0?(p(!1),Ht((I=(M=(J=E.payload)==null?void 0:J.VisitorHeader)==null?void 0:M.VisitorDetails[0])==null?void 0:I.VisitorDetailId,(h=E.payload)==null?void 0:h.VisitorList)):(O(!1),(Xi=y.current)==null||Xi.show({severity:"error",summary:"Error",detail:E.payload.tranStatus.lstErrorItem[0].Message}))}).catch(E=>{var J;O(!1),(J=y.current)==null||J.show({severity:"error",summary:"Error",detail:E})})}}}}),Vs=ai({initialValues:ys,validationSchema:Hs,onSubmit:(e,{resetForm:n})=>{var r,c,V,L;if(!oe){(r=y.current)==null||r.show({severity:"warn",summary:"Warning Message",detail:"Please Add Document."});return}let i={};i.VisitorDetailId=e.VisitorDetailId,i.VisitorId=e.VisitorId,i.TitleId=e.TitleId,i.FirstName=e.FirstName.trim(),i.LastName=e.LastName.trim(),i.DepartmentId=e.DepartmentId,i.Dob=e.Dob,i.MailId=e.MailId,i.MobileNo=e.CountryCode,i.IdCardType=e.IdCardType,i.IdCardNo=e.IdCardNo,i.DocumentName=e.DocumentName||"",i.DocumentUrl=e.DocumentUrl||"",i.Status=e.Status,i.ExpirryDate=e.ExpirryDate,i.WorkSeverity=e.WorkSeverity,i.VisitorName=Zt.find(x=>x.MetaSubId==e.TitleId).MetaSubDescription+". "+i.FirstName+" "+i.LastName,i.DepartMentName=ze.find(x=>x.DepartmentId==e.DepartmentId).DepartmentName,i.IdCardTypeName=Xt.find(x=>x.MetaSubId==e.IdCardType).MetaSubDescription,i.StatusName=we.find(x=>x.MetaSubId==e.Status).MetaSubDescription,i.WorkSeverityName=_i.find(x=>x.MetaSubId==e.WorkSeverity).MetaSubDescription;const a=e.Dob.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});i.ShowDate=a;const o=e.ExpirryDate.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});if(i.ShowExpirryDate=o,Gi==-1){if((de.filter(u=>u.VisitorName==i.VisitorName)||[]).length>0&&i.VisitorDetailId==0){(c=y.current)==null||c.show({severity:"warn",summary:"Warning Message",detail:"Worker Already Exists"});return}if((de.filter(u=>u.MobileNo==i.MobileNo)||[]).length>0&&i.VisitorDetailId==0){(V=y.current)==null||V.show({severity:"warn",summary:"Warning Message",detail:"Mobile No Already Exists"});return}if(i.MailId!=""&&(de.filter(E=>E.MailId==i.MailId)||[]).length>0&&i.VisitorDetailId==0){(L=y.current)==null||L.show({severity:"warn",summary:"Warning Message",detail:"Mail ID Already Exists"});return}zt([...de,i])}else{let x=de;x[Gi]=i,zt(x),ns(-1)}oe&&(qe.length>0?$t([...qe,oe]):$t([oe])),Ds()}}),zi=(e,n,i)=>{N.setFieldValue(e,i)},hs=e=>{N.setFieldValue(e.target.name,e.value)},fs=(e,n,i)=>{N.setFieldValue(e??N[n][e],N,i)},Ds=()=>{Vs.resetForm(),ee(null),ot("")},ii=(e,n,i)=>{N.setFieldValue(e,i)},Is=()=>{var e;Ri(gt.NO_IMG),ss(null),N.setFieldValue("DocumentName",""),N.setFieldValue("DocumentUrl",""),d.setFieldValue("VisitorImageName",""),d.setFieldValue("VisitorImageUrl",""),(e=Hi.current)==null||e.clear()},$i=(e,n,i)=>{Yt([]),Dt([]),N.setFieldValue(e,i),N.setFieldValue("StateId",null);var o=v(Ts({CountryId:i}));o.then(r=>{var c;r.payload.tranStatus.result?(Yt(r.payload.StateList),r.payload.StateList&&r.payload.StateList.length&&r.payload.StateList.length>0&&Qi("StateId",{},r.payload.StateList[0].StateId)):(c=y.current)==null||c.show({severity:"error",summary:"Error",detail:r.payload.tranStatus.lstErrorItem.message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",summary:"Error",detail:JSON.stringify(r)})})},Qi=(e,n,i)=>{Dt([]),N.setFieldValue(e,i),N.setFieldValue("CityId",null);var o=v(ws({StateId:i}));o.then(r=>{var c;r.payload.tranStatus.result?(Dt(r.payload.CityList),r.payload.CityList&&r.payload.CityList.length&&r.payload.CityList.length>0&&Ti("CityId",{},r.payload.CityList[0].CityId)):(c=y.current)==null||c.show({severity:"error",summary:"Error",detail:r.payload.tranStatus.lstErrorItem.message})}).catch(r=>{var c;(c=y.current)==null||c.show({severity:"error",summary:"Error",detail:JSON.stringify(r)})})},gs=e=>{var i;if(e.type!="image/jpeg"&&e.type!="image/png"&&e.type!="image/jpg"){(i=y.current)==null||i.show({severity:"warn",summary:"Error Message",detail:"Please Upload only Files with Format (Image/ JPEG, JPG, PNG)"});return}le(e),N.setFieldValue("DocumentName",e.name),N.setFieldValue("DocumentUrl",e.name),d.setFieldValue("VisitorImageName",e.name),d.setFieldValue("VisitorImageUrl",e.name);const n=URL.createObjectURL(e);Ri(n)},Ss=(e,n)=>{const i=e.name.slice((e.name.lastIndexOf(".")-1>>>0)+2).toLowerCase(),a=e.type.toLowerCase();return n.includes(i)||n.includes(a)},bs=e=>{var i,a,o;It.current&&Yi();const n=["jpeg","jpg","png","pdf","doc","docx","xls","xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];if(e.files&&!Ss(e.files[0],n)){(i=y.current)==null||i.show({severity:"warn",summary:"Error Message",detail:"Please Upload only Files with Format (Image/ JPEG, JPG, PNG & DOC/ WORD, EXCEL, PDF)"}),(a=It.current)==null||a.clear();return}if(e.files.length>0){qi(e.files[0]),N.setFieldValue("VisitorDocumentName",e.files[0].name);const r=URL.createObjectURL(e.files[0]);N.setFieldValue("VisitorDocumentUrl",e.files[0].name),Kt(r)}else{(o=y.current)==null||o.show({severity:"warn",summary:"Error Message",detail:"Please Upload only Files with Format (Image/ JPEG, JPG, PNG & DOC/ WORD, EXCEL, PDF)"});return}},Yi=()=>{var e;(e=It.current)==null||e.clear(),Kt(""),qi(null),N.setFieldValue("VisitorDocumentName",""),N.setFieldValue("VisitorDocumentUrl","")},Ns=()=>{_t!=""&&window.open(_t,"_blank")},Ls=()=>t.jsxs("div",{className:"flex align-items-center flex-column",children:[t.jsx("i",{className:"pi pi-image mt-3 p-5",style:{fontSize:"5em",borderRadius:"50%",backgroundColor:"var(--surface-b)",color:"var(--surface-d)"}}),t.jsx("span",{style:{fontSize:"1.2em",color:"var(--text-color-secondary)"},className:"my-5",children:"Drag and Drop Image Here"})]}),Zi=e=>{console.log(e),Z({...b,selectedType:e.value?36:35}),ft("VisitorTypeId",{},e.value?36:35),ii("VisitorTypeId",{},e.value?36:35),K(e.value)};return s.useEffect(()=>{zi("MobileNo",{},"+91")},[]),t.jsxs("div",{style:{overflow:"auto",height:"100vh"},children:[t.jsx("div",{className:"appointment-page",style:{backgroundImage:"url("+$s+")"},children:t.jsxs("div",{className:"center-container",children:[j?null:t.jsx("div",{className:"white mb20 appointment-hdr",children:t.jsx("div",{className:"widget-body",children:t.jsx("div",{className:"flex gap-3 justify-content-center",children:t.jsxs("div",{className:"flex align-items-center",children:[t.jsx("h2",{className:"ml-2 mr-2",children:"Visitor"}),t.jsx(zs,{checked:B,onChange:e=>Zi(e)}),t.jsx("h2",{className:"ml-2",children:"Contractor"})]})})})}),t.jsx("div",{className:`${gi?"white":""} appointment-container scroll-y`,children:t.jsxs("div",{className:`${gi?"h-full":"white"}`,children:[j?null:t.jsx("div",{className:"progress-bar",children:t.jsxs("ul",{children:[t.jsx("li",{className:"host-info completed",children:"Host Information"}),t.jsx("li",{className:`visitor-info ${w?"completed":""}`,children:`${B?"Contractor":"Visitor"} Information`})]})}),j?t.jsx(il,{successData:U}):w?t.jsx(Zs,{isVisMaster:w,setIsVisMaster:p,visitorEntryFormik:d,VisitorNameList:q,handleVisitorSelected:Ht,isViewVM:cs,isCreateVM:ds,VisitorTypeListVM:ms,handleSelectVM:zi,TitleListVM:Zt,CountryListVM:ps,OnchangecountryVM:$i,StateListVM:ei,OnchangestateVM:Qi,CityListVM:ti,IdCardListVM:Xt,StatusListVM:us,onUploadVM:gs,itemTemplateVM:Ls,imageUrlVM:is,handleOnChangeVM:fs,visitorFormVM:Ki,visitorRefVM:ts,formikVM:N,onChangeVisitorTypeVM:ii,tempStateListVM:os,tempCityListVM:rs,handleCloseImageVM:Is,handleChangeVM:hs,profUploadRef:Hi,VisitorhandleHyperlinkVM:Ns,onUploadDocumentVisitorVM:bs,deleteDocumentsVisitorVM:Yi,documentUrlVisitorVM:_t,documentVisitorUploadRefVM:It,toast:y,setVisitorEntryBelongingDetailList:Ae,VisitorEntryBelongingDetailList:Bt,pageType:B,cameraOff:ye,setCameraOff:Ie,phonenumber:Sa}):t.jsx(el,{isCreate:k,PlantList:va,isView:bi,loading:ba,visitorEntryFormik:d,selectedData:b,setShowEntryDetail:Y,setVisible:S,setVisitorNameList:T,VisitorNameList:q,visitorEntryDetailList:z,setvisitorEntryDetailList:_,setVisitorEntryBelongingDetailList:Ae,setList:Ua,visitorEntryForm:!0,VisitorEntryValidationSchema:!0,onUpload:_a,itemTemplate:Qa,imageUrl:Ye,IsPreBookingList:rt,VisitorTypeList:Fe,onChangeVisitorType:ft,handleSelect:Ti,autoCompleteRef:Xe,OnSelectVisitorCode:qa,onChangeMatType:Ja,filteritemType:et,handleIsPreBook:Wa,VECodeDisable:Nt,EmployeeList:Ke,onChangeVisitor:Fi,ProofList:Pe,ValidFromDisable:Lt,ValidToDisable:xt,onChageFromDate:Jt,TominDate:Ct,CheckboxDisable:Mt,onClickIsExistingVehicle:vi,HideVehicleDD:ri,HideDriverDD:di,onUploadDocument:Ka,documentUrl:Rt,onClickIsExistingDriver:ki,OnChangePartyTypes:Pi,PartyTypeList:tt,PartyNameList:at,AreaList:it,RouteList:Ue,onClickIsAppointmentBooking:ji,DriverList:bt,VehicleList:dt,IsDeliveryChallan:mi,IsInvoiceBased:Ft,IsVehicleTripBased:Pt,IsPartyDisable:jt,IsVehicleDetailsDisable:vt,ShowVisitorContranctor:da,IsMaterialDetailsShow:kt,InvoiceNumberDisable:ma,DcNumberDisable:ua,PoNumberDisable:pa,ContainerNumberDisable:ya,StatusList:we,OnChangeVehicle:Ga,onChageToDate:Ha,deleteDocuments:za,handleHyperlink:$a,cameraOff:ye,setCameraOff:Ie,handleChange:Aa,handleRouteSelect:Ra,initFldDisable:Va,CreatePageOnLoadCVisitorEntry:Ba,resetAllForm:Gt,IsWorkerDetailsShow:na,IsBelongingDetailsShow:Ot,VisitorEntryBelongingDetailList:Bt,VisitorEntryMaterialDetailList:Vi,setVisitorEntryMaterialDetailList:xe,MaterialList:ca,PurposeList:ha,IsdisableSave:yi,toast:y,handlePoVSelect:wi,selectedPlant:Ia,handleVisitorSelected:Ht,pageType:B,handlePlantSelect:Oi,handleDepartmentSelect:Ya,PlantWiseDepartmentList:as,plantDisable:Da}),j?null:t.jsx("div",{className:"widget-ftr text-center",children:t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"action-btn",children:[t.jsx(We,{label:"",title:"Prev",icon:"las la-arrow-left",className:"text-center",onClick:Bi,disabled:!w}),t.jsx(We,{label:"",title:"Next",icon:"las la-arrow-right",className:"text-center",onClick:Bi,disabled:w})]})})}),w&&!j?t.jsx("div",{className:"widget-ftr text-center",children:t.jsx("div",{className:"flex flex-row justify-content-center widget-ftr text-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(We,{label:"Save",title:"Save",icon:"pi pi-save",type:"submit",disabled:yi,onClick:es}),t.jsx(We,{label:"Cancel",severity:"danger",className:"preview-close",title:"Cancel",icon:"pi pi-times-circle",onClick:()=>Gt()})]})})}):null]})})]})}),t.jsx(Fs,{toast:y})]})};export{il as MessageAlert,kl as default};
