import{a as O,u as D,r as p,b as S,c1 as B,c as q,t as x,c3 as A,c4 as k,c5 as U,c6 as R,j as t,F as T,B as j,n as d,au as H}from"./index-25a41ef1.js";import{j as J}from"./Master-b11b8a2f.js";import"./index.esm-21a4a4d3.js";const W=()=>{const N=O(),c=D(),i=p.useRef(null),{CityList:Y,StatusList:v,loading:E,isView:n,CountryList:L,StateList:z,HdrTable:e,isCreate:u}=S(a=>a.customer),[M,w]=p.useState([]),[F,h]=p.useState([]);S(a=>a.customer.createEditData),S(a=>a.customer.updatetranstatus),S(a=>a.customer.createTranstatus),p.useEffect(()=>{u==!0?c(B({CustomerId:0})):P("CountryId",{},e.CountryId,1)},[]);const s=q({initialValues:{CustomerCode:e!=null?e.CustomerCode:"",CustomerName:e!=null?e.CustomerName:"",CountryId:e!=null?e.CountryId:"",StateId:e!=null?e.StateId:"",CityId:e!=null?e.CityId:"",CompanyId:e!=null?e.CompanyId:localStorage.CompanyId,PlantId:e!=null?e.PlantId:localStorage.PlantId,ContactPerson:e!=null?e.ContactPerson:"",PhoneNumber:e!=null?e.PhoneNumber:"",Email:e!=null?e.Email:"",Address:e!=null?e.Address:"",Status:e!=null?e.Status:1,CreatedBy:e!=null?e.CreatedBy:localStorage.UserId,CreatedOn:e!=null?e.CreatedOn:new Date,ModifiedBy:e!=null?localStorage.UserId:null,ModifiedOn:e!=null?new Date:null},validationSchema:J,onSubmit:(a,{resetForm:f})=>{const o=new FormData;let m={Customer:{CustomerId:e!=null?e.CustomerId:0,CustomerCode:a.CustomerCode,CustomerName:a.CustomerName,CountryId:a.CountryId,StateId:a.StateId,CityId:a.CityId,CompanyId:localStorage.CompanyId,PlantId:localStorage.PlantId,CustomerImageName:"",CustomerImageUrl:"",CreatedBy:localStorage.UserId,CreatedOn:e!=null?x(e.CreatedOn):x(new Date),ModifiedBy:localStorage.UserId,ModifiedOn:e!=null?x(new Date):null,Status:a.Status,ContactPerson:a.ContactPerson,PhoneNumber:a.PhoneNumber,Email:a.Email,Address:a.Address},CustomerBillingDetail:[{CustomerId:1,BillingAddress1:"",BillingAddress2:"",CityId:1,StateId:a.State,CountryId:a.Country,PinCode:"",ContactPerson:"",Phone1:"",Phone2:"",MobileNo:"",MailId:"",CompanyId:localStorage.CompanyId,PlantId:localStorage.PlantId,Status:1,CreatedBy:localStorage.UserId,CreatedOn:new Date,ModifiedBy:localStorage.UserId,ModifiedOn:new Date}]},g=JSON.stringify(m);o.append("input",g),o.append("webfile",""),u==!1?c(A(o)).then(l=>{var r,C;(l.payload!=null||!l.payload)&&(l.payload.transtatus.result==!0?((r=i.current)==null||r.show({severity:"success",summary:"Success Message",detail:l.payload.transtatus.lstErrorItem[0].Message}),b(),setTimeout(()=>{N.push("/home/vCustomer")},800)):(C=i.current)==null||C.show({severity:"error",summary:"Error Message",detail:l.payload.transtatus.lstErrorItem[0].Message}))}).catch(l=>{var r;(r=i.current)==null||r.show({severity:"error",summary:"Error Message",detail:l})}):c(k(o)).then(l=>{var r,C;l.payload.transtatus.result==!0?((r=i.current)==null||r.show({severity:"success",summary:"Success Message",detail:l.payload.transtatus.lstErrorItem[0].Message}),b()):l.payload.transtatus.result==!1&&((C=i.current)==null||C.show({severity:"error",summary:"Error Message",detail:l.payload.transtatus.lstErrorItem[0].Message}))}).catch(l=>{var r;(r=i.current)==null||r.show({severity:"error",summary:"Error Message",detail:JSON.stringify(l)})})}});console.log(e,"HdrTable");const I=(a,f,o)=>{s.setFieldValue(a,o)},P=(a,f,o,m=0)=>{s.setFieldValue("StateId",null),s.setFieldValue("CityId",null),s.setFieldValue(a,o),w(null),h(null);var y=c(U({CountryId:o}));y.then(l=>{w(l.payload.OnChangeCountry),!u&&m==1&&V("StateId",{},e.StateId,1)}).catch(l=>{var r;(r=i.current)==null||r.show({severity:"error",detail:"Error",summary:l})})},V=(a,f,o,m=0)=>{h(null),s.setFieldValue("CityId",null),s.setFieldValue(a,o);var y=c(R({StateId:o}));y.then(l=>{h(l.payload.OnChangeState),!u&&m==1&&I("CityId",{},e.CityId)}).catch(l=>{var r;(r=i.current)==null||r.show({severity:"error",detail:"Error",summary:l})})},b=()=>{s.resetForm(),h([])};return t.jsxs(t.Fragment,{children:[t.jsx(T,{initialValues:s.initialValues,validationSchema:s.validationSchema,onSubmit:s.handleSubmit,children:t.jsx("div",{className:"page-container",children:t.jsxs("div",{className:"inner-page-container",children:[t.jsx("div",{className:"page-title",children:t.jsxs("div",{className:"grid grid-nogutter",children:[t.jsx("div",{className:"md:col-6",children:t.jsx("h1",{children:"Customer"})}),t.jsx("div",{className:"md:col-6 text-right",children:t.jsxs("div",{className:"action-btn",children:[t.jsxs(t.Fragment,{children:[t.jsx(j,{label:"",title:"Save",icon:"pi pi-save",className:"text-center",type:"submit",disabled:!!n,onClick:()=>s.handleSubmit()}),t.jsx(j,{label:"",severity:"danger",icon:"pi pi-trash",title:"Clear",className:"text-center",disabled:!!(n||u==!1),onClick:()=>b()})]}),t.jsx(j,{label:"",icon:"pi pi-search",title:"Back to Search",className:"p-button p-button-success text-center",onClick:()=>{N.push("/home/vCustomer")}})]})})]})}),t.jsx("div",{className:"form-container scroll-y",children:t.jsx("form",{children:t.jsx("div",{className:"white",children:t.jsx("div",{className:"widget-body",children:t.jsx("div",{className:"normal-table",children:t.jsx("div",{className:"grid",children:E?"loading":t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-12 md:col-9",children:t.jsxs("div",{className:"grid",children:[t.jsx(d,{type:"text",name:"CustomerCode",label:"Customer Code",options:"",show:!0,required:!1,disable:!0,optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4"}),t.jsx(d,{type:"text",name:"CustomerName",label:"Customer Name",options:"",show:!0,required:!0,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4"}),t.jsx(d,{type:"text",name:"ContactPerson",label:"Contact Person Name",options:"",show:!0,required:!0,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4"}),t.jsx(d,{type:"text",name:"PhoneNumber",label:"Phone number",options:"",show:!0,required:!0,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",formik:s,maxlength:"15",minLength:9,fldStyle:"col-12 md:col-4"}),t.jsx(d,{type:"text",name:"Email",label:"Email ID",options:"",show:!0,required:!0,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",formik:s,fldStyle:"col-12 md:col-4"}),t.jsx(d,{type:"select",name:"CountryId",label:"Country",options:L,show:!0,required:!0,disable:!!n,optionLabel:"CountryName",optionValue:"CountryId",handleSelect:P,formik:s,fldStyle:"col-12 md:col-4"})]})}),t.jsx(d,{type:"textarea",name:"Address",label:"Address",options:"",show:!0,required:!1,disable:!!n,optionLabel:"",optionValue:"",handleSelect:"",maxlength:"500",formik:s,fldStyle:"col-12 md:col-3",style:{maxHeight:"100px",overflowY:"auto"}}),t.jsx(d,{type:"select",name:"StateId",label:"State",options:M,show:!0,required:!0,disable:!!n,optionLabel:"StateName",optionValue:"StateId",handleSelect:V,fldStyle:"col-12 md:col-3",formik:s}),t.jsx(d,{type:"select",name:"CityId",label:"City",options:F,show:!0,required:!0,disable:!!n,optionLabel:"CityName",optionValue:"CityId",handleSelect:I,fldStyle:"col-12 md:col-3",formik:s}),t.jsx(d,{type:"select",name:"Status",label:"Status",options:v,show:!0,required:!0,optionLabel:"MetaSubDescription",optionValue:"MetaSubId",handleSelect:I,fldStyle:"col-12 md:col-3",formik:s,disable:!!n||u==null||u==!0})]})})})})})})})]})})}),t.jsx(H,{ref:i})]})};export{W as default};
