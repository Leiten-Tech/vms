import{r as o,a as I,u as v,b as f,p as b,ad as S,ae as u,j as t,C as A,d as C,af as h,g as j,ag as R}from"./index-25a41ef1.js";import{P as w,A as P}from"./PageHeader-b76b68bd.js";import{e as g}from"./ExportService-4b3a6c99.js";import"./column.esm-11a46c7b.js";import"./index.esm-9a713e1a.js";import"./inputswitch.esm-a89edc74.js";import"./jspdf.es.min-40ee8370.js";const V=()=>{o.useState(null);const p=I(),l=v(),y=f(e=>e.user.UserList),N=f(e=>e.user.loading),[T,U]=o.useState(!1),i=o.useRef();o.useEffect(()=>{d()},[]),o.useEffect(()=>{b()});const d=()=>{const e={UserId:0,Taskname:"SearchInitialize",PlantId:localStorage.PlantId};return l(S(e))};o.useState(null);const[m,F]=o.useState({pageTitle:"User",pageHeader:{pageActions:[{create:!0,clear:!1,save:!1,createQuery:"/home/cUser",createDispatch:()=>l(u({data:null,isView:!1,isCreate:!0}))}]},tableCheckSelection:!1,tableAction:!0,tableActionStyle:{textAlign:"center",minWidth:"10rem"},tableRows:10,tableRowsOptions:[5,10,25],tablePagination:!0,tableActions:[{title:"View",name:"view"},{title:"Edit",name:"edit"},{title:"Delete",name:"delete"}],tableColumns:[{title:"User Name",name:"UserName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem",maxWidth:"20rem"}},{title:"Role Name",name:"DefaultRoleName",sort:!0,avatar:!1,badge:!1,colStyle:{}},{title:"Company Name",name:"CompanyName",sort:!0,avatar:!1,badge:!1,colStyle:{minWidth:"10rem"}},{title:"Plant Name",name:"PlantName",sort:!0,avatar:!1,badge:!1,colStyle:{}}],tableExport:e=>{d().then(n=>{x(n.payload.UserList).then(a=>{e==="pdf"?g.Export("User",a,"pdf"):e==="excel"&&g.Export("User",a,"excel")}).catch(a=>{console.error(a.message)})})}}),x=e=>new Promise((r,n)=>{let a=[];e.length>0?(e.forEach(s=>{let c={"User Name":s.UserName,"Role Name":s.DefaultRoleName,"Company Name":s.CompanyName,"Plant Name":s.PlantName};a.push(c)}),r(a)):n(new Error("No data available for export."))}),E={view:e=>{const r={UserId:e.data.UserId,Taskname:"CREATEINITIALIZE"};l(h(r)).then(a=>{a.payload.transtatus.result==!0&&p.push("/home/cUser")}).catch(a=>{}),l(u(e)),U(!0)},edit:e=>{const r={UserId:e.data.UserId,Taskname:"CREATEINITIALIZE"};l(h(r)).then(a=>{a.payload.transtatus.result==!0&&p.push("/home/cUser")}).catch(a=>{}),l(u(e))},delete:e=>{j(`Are you sure you want to inactive this user (${e.data.UserName}) ?`,"Confirmation",()=>{let r={UserId:e.data.UserId};l(R(r)).then(a=>{var s,c;a.payload.transtatus.result==!0?((s=i.current)==null||s.show({severity:"success",summary:"Success Message",detail:a.payload.transtatus.lstErrorItem[0].Message}),d()):a.payload.transtatus.result==!1&&((c=i.current)==null||c.show({severity:"error",summary:"Error Message",detail:a.payload.transtatus.lstErrorItem[0].Message}))}).catch(a=>{var s;(s=i.current)==null||s.show({severity:"error",summary:"Error Message",detail:JSON.stringify(a)})})},()=>{})}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-container",children:t.jsxs("div",{className:"inner-page-container",children:[t.jsx(w,{pageTitle:m.pageTitle,pageConfig:m}),t.jsx("div",{className:"form-container scroll-y",children:t.jsx("div",{className:"white",children:t.jsx("div",{className:"widget-body",children:t.jsx("div",{className:"card",children:t.jsx(P,{handleActions:E,data:y,loading:N,pageConfig:m})})})})})]})}),t.jsx(A,{}),t.jsx(C,{toast:i})]})};export{V as default};
